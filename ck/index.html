<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <title>Thông Tin Chuyển Khoản</title>
    <meta http-equiv="Cache-Control" content="public, max-age=31536000">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="preconnect" href="https://fonts.googleapis.com/">
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../logo.jpg" />
    
    <!-- The core Firebase JS SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <!-- The Firebase storage SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-storage-compat.js"></script>
    <!-- The Firebase firestore SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <!-- Load jQuery from a CDN -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.5/xlsx.full.min.js"></script>
    
    <!-- Main CSS -->
    <link rel="stylesheet" href="../main.css">
    
    <!-- Navigation Manager - Load trước khi load page scripts -->
    <script src="../js/navigation.js"></script>
    <script src="../js/common-utils.js"></script>
</head>

<body>
    <!-- Security Indicator -->
    <div class="security-indicator" id="securityIndicator">Secure</div>
    
    <!-- Performance Indicator -->
    <div class="performance-indicator" id="performanceIndicator">Fast Load</div>
    
    <!-- Menu Toggle Button -->
    <button class="menu-toggle">
        <div class="hamburger"></div>
    </button>

    <!-- Sidebar Navigation -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h3>Menu Điều Hướng</h3>
            <button class="close-btn">&times;</button>
        </div>
        <ul class="nav-list"></ul>
    </nav>

    <!-- Overlay -->
    <div class="overlay" id="overlay"></div>

    <!-- Top buttons -->
    <div class="top-buttons">
        <button id="toggleFormButton">Hiện biểu mẫu</button>
        <button onclick="exportToExcel()" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%);">Xuất Excel</button>
        <button id="toggleLogoutButton">Đăng xuất</button>
    </div>

    <!-- Main content -->
    <div class="main-content">
        <div class="header">
            <div id="parentContainer">
                <p class="tieude">Thông tin chuyển khoản</p>
            </div>
        </div>

        <!-- Data Form -->
        <div id="dataForm" class="form-section" style="display: none;">
            <h1>Thêm Thông tin</h1>
            <form id="moneyTransferForm">
                <div class="form-group">
                    <label for="ngayck">Ngày chuyển khoản:</label>
                    <input type="date" id="ngayck">
                </div>
                
                <div class="form-group">
                    <label for="transferNote">Ghi chú chuyển khoản:</label>
                    <input type="text" id="transferNote" list="suggestionsNote" required>
                    <datalist id="suggestionsNote"></datalist>
                </div>
                
                <div class="form-group">
                    <label for="transferAmount">Số tiền chuyển:</label>
                    <input type="text" id="transferAmount" required>
                </div>
                
                <div class="form-group">
                    <label for="bank">Ngân hàng:</label>
                    <select id="bank" required>
                        <option value="ACB">ACB</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="customerInfo">Tên FB + SĐT:</label>
                    <input type="text" id="customerInfo" list="suggestionsInfo" required>
                    <datalist id="suggestionsInfo"></datalist>
                </div>
                
                <div class="center-button">
                    <button type="submit" id="addButton">Thêm</button>
                    <button type="button" id="clearDataButton">Reset</button>
                </div>
            </form>
        </div>

        <!-- Total Amount Display -->
        <div id="totalAmount">Tổng Tiền: 0</div>

        <!-- Table -->
        <div class="table-container">
            <div class="ck">
                <table>
                    <thead>
                        <tr>
                            <th>Ngày</th>
                            <th>Ghi chú chuyển khoản</th>
                            <th>Số tiền chuyển</th>
                            <th>Ngân hàng</th>
                            <th>Đi đơn</th>
                            <th>Tên FB + SĐT</th>
                            <th>Sửa thông tin</th>
                            <th>Xóa</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody"></tbody>
                </table>
            </div>
        </div>
    </div>
    <!-- Modal for editing -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()" 
				  style="position: sticky; top: 0; right: 0; float: right; font-size: 24px; cursor: pointer; background: white; z-index: 10; padding: 5px;">
				  &times;
			</span>
            <div class="form-group">
                <label for="editDate">Ngày:</label>
                <input type="text" id="editDate">
            </div>
            <div class="form-group">
                <label for="editNote">Ghi chú:</label>
                <input type="text" id="editNote">
            </div>
            <div class="form-group">
                <label for="editAmount">Số tiền:</label>
                <input type="text" id="editAmount">
            </div>
            <div class="form-group">
                <label for="editBank">Ngân hàng:</label>
                <input type="text" id="editBank">
            </div>
            <div class="form-group">
                <label for="editInfo">FB+SĐT:</label>
                <input type="text" id="editInfo">
            </div>
            <button onclick="saveChanges()">Lưu</button>
        </div>
    </div>

    <!-- Enhanced Floating Alert -->
    <div id="floatingAlert">
		<div class="alert-content">
			<div class="loading-spinner" style="display: none;">
				<div class="spinner"></div>
			</div>
			<div class="alert-text">Thông báo hiển thị!</div>
		</div>
	</div>
    
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay"></div>
    
    //<!-- Blocking Overlay -->
    //<div id="blockingOverlay"></div>
    
    <!-- Tooltip -->
    <div id="tooltip" class="tooltip"></div>
    
    <!-- Original JavaScript file -->
    <script src="scriptObfuscator.js"></script>
</body>

</html>
