# ğŸ“¦ PLAN: Trang THEO DÃ•I NHáº¬P HÃ€NG SL

## ğŸ“‹ Tá»•ng quan

| Má»¥c | Chi tiáº¿t |
|-----|----------|
| **TÃªn trang** | THEO DÃ•I NHáº¬P HÃ€NG SL |
| **URL** | `/inventory-tracking/` |
| **Giao diá»‡n** | Hybrid: Tab + Table Group by NgÃ y |
| **Firestore Collections** | `inventory_tracking`, `inventory_prepayments` |

---

## ğŸ—‚ï¸ Cáº¥u trÃºc Tab

| Tab | TÃªn | MÃ´ táº£ | Quyá»n |
|-----|-----|-------|-------|
| 1 | ğŸ“¦ Theo dÃµi Ä‘Æ¡n hÃ ng | Danh sÃ¡ch Ä‘á»£t hÃ ng, kiá»‡n, hÃ³a Ä‘Æ¡n NCC | TÃ¹y chá»‰nh |
| 2 | ğŸ’° CÃ´ng ná»£ | Thanh toÃ¡n trÆ°á»›c & tÃ­nh CÃ’N Láº I | TÃ¹y chá»‰nh (Admin) |

---

## ğŸ“Š Cáº¥u trÃºc Dá»¯ liá»‡u Firestore

### Collection: `inventory_tracking` (Äá»£t hÃ ng)

```javascript
{
  // === THÃ”NG TIN CÆ  Báº¢N ===
  id: "ship_20241103_001",           // Auto-generated
  ngayDiHang: "2024-11-03",          // Date string YYYY-MM-DD
  createdAt: Timestamp,
  updatedAt: Timestamp,
  createdBy: "username",
  updatedBy: "username",

  // === KIá»†N HÃ€NG ===
  kienHang: [
    { stt: 1, soKg: 88 },
    { stt: 2, soKg: 60 }
  ],
  tongKien: 2,                        // Auto-calculate
  tongKg: 148,                        // Auto-calculate

  // === HÃ“A ÄÆ N NHÃ€ CUNG Cáº¤P ===
  hoaDon: [
    {
      id: "hd_001",
      sttNCC: 6,
      sanPham: [
        {
          id: "sp_001",
          maSP: "721",
          tenHang: "",                // TÃªn hÃ ng (optional)
          soMau: 2,
          soLuong: 10,
          giaDonVi: 54,               // Ngoáº¡i tá»‡ (khÃ´ng pháº£i VND)
          thanhTien: 540,             // Auto: soLuong * giaDonVi
          rawText: "MÃƒ 721 2 MÃ€U 10X54"  // LÆ°u text gá»‘c Ä‘á»ƒ hiá»ƒn thá»‹
        },
        {
          id: "sp_002",
          maSP: "720",
          tenHang: "",
          soMau: 2,
          soLuong: 10,
          giaDonVi: 57,
          thanhTien: 570,
          rawText: "MÃƒ 720 2 MÃ€U 10X57"
        }
      ],
      tongTienHD: 1110,               // Auto: Î£(thanhTien)
      tongMon: 20,                    // Auto: Î£(soLuong)
      soMonThieu: 0,                  // Cáº­p nháº­t sau khi kiá»ƒm hÃ ng
      anhHoaDon: [                    // Firebase Storage URLs
        "https://storage.../hd_001_1.jpg",
        "https://storage.../hd_001_2.jpg"
      ]
    },
    {
      id: "hd_002",
      sttNCC: 9,
      sanPham: [...],
      tongTienHD: 2355,
      tongMon: 125,
      soMonThieu: 0,
      anhHoaDon: []
    }
  ],

  // === Tá»”NG Káº¾T Äá»¢T HÃ€NG ===
  tongTienHoaDon: 13345,              // Auto: Î£(tongTienHD)
  tongSoMon: 445,                     // Auto: Î£(tongMon)
  tongMonThieu: 0,                    // Auto: Î£(soMonThieu)

  // === CHI PHÃ & GHI CHÃš (Admin only) ===
  chiPhiHangVe: [
    { id: "cp_001", loai: "XE GIAO HÃ€NG", soTien: 50 },
    { id: "cp_002", loai: "XE SÃ‚N BAY Vá»€", soTien: 300 },
    { id: "cp_003", loai: "CÃ”NG", soTien: 250 },
    { id: "cp_004", loai: "KHÃCH Sáº N", soTien: 3080 }
  ],
  tongChiPhi: 3680,                   // Auto: Î£(soTien)
  ghiChuAdmin: "Ghi chÃº..."
}
```

### Collection: `inventory_prepayments` (CÃ´ng ná»£ - Thanh toÃ¡n trÆ°á»›c)

```javascript
{
  id: "pay_20241103_001",
  ngayThanhToan: "2024-11-03",
  soTien: 100000,                     // Ngoáº¡i tá»‡
  ghiChu: "",
  createdAt: Timestamp,
  createdBy: "admin"
}
```

### CÃ´ng thá»©c tÃ­nh CÃ’N Láº I

```
CÃ’N Láº I = Î£(soTien tá»« inventory_prepayments)
        - Î£(tongTienHoaDon tá»« inventory_tracking)
        - Î£(tongChiPhi tá»« inventory_tracking)
```

---

## ğŸ” Há»‡ thá»‘ng PhÃ¢n quyá»n

### Cáº¥u trÃºc Permission trong User document

```javascript
// ThÃªm vÃ o users collection
{
  // ... existing fields ...

  inventoryTrackingPermissions: {
    // Tab permissions
    tab_tracking: true,              // Xem tab Theo dÃµi Ä‘Æ¡n hÃ ng
    tab_congNo: false,               // Xem tab CÃ´ng ná»£ (admin only)

    // CRUD permissions
    create_shipment: true,           // ThÃªm Ä‘á»£t hÃ ng má»›i
    edit_shipment: true,             // Sá»­a Ä‘á»£t hÃ ng
    delete_shipment: false,          // XÃ³a Ä‘á»£t hÃ ng

    // Field permissions (Tab 1)
    view_ngayDiHang: true,
    view_kienHang: true,
    view_hoaDon: true,
    view_anhHoaDon: true,
    view_tongTien: true,
    view_tongMon: true,
    view_soMonThieu: true,
    edit_soMonThieu: true,           // Cáº­p nháº­t sá»‘ thiáº¿u sau kiá»ƒm hÃ ng
    view_chiPhiHangVe: false,        // Admin only
    edit_chiPhiHangVe: false,
    view_ghiChuAdmin: false,         // Admin only
    edit_ghiChuAdmin: false,

    // Tab 2 - CÃ´ng ná»£
    view_prepayments: false,
    create_prepayment: false,
    edit_prepayment: false,
    delete_prepayment: false,

    // Export
    export_excel: true
  }
}
```

### Cáº­p nháº­t User Management UI

ThÃªm section má»›i trong `/user-management/`:
- ThÃªm config vÃ o `detailed-permissions-config.js`
- ThÃªm UI component Ä‘á»ƒ quáº£n lÃ½ permissions cho trang nÃ y

---

## ğŸ–¥ï¸ Giao diá»‡n Chi tiáº¿t

### Tab 1: Theo dÃµi ÄÆ¡n hÃ ng

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“¦ THEO DÃ•I NHáº¬P HÃ€NG SL                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ“¦ Theo dÃµi Ä‘Æ¡n hÃ ng]  [ğŸ’° CÃ´ng ná»£ ğŸ”’]                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Filters:                                                                     â”‚
â”‚ [ğŸ“… Tá»« ngÃ y: ____] [ğŸ“… Äáº¿n ngÃ y: ____] [NCC: All â–¼] [ğŸ” TÃ¬m mÃ£ SP: ____]   â”‚
â”‚                                                                [+ ThÃªm Ä‘á»£t] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚ â•â•â• ğŸ“… 03/11/2024 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• [âœï¸] [ğŸ—‘ï¸] [ğŸ“¤]   â”‚
â”‚ â”‚                                                                         â”‚ â”‚
â”‚ â”‚ KIá»†N HÃ€NG: 2 kiá»‡n | Tá»•ng: 148 kg                                       â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”                                                    â”‚ â”‚
â”‚ â”‚ â”‚ Kiá»‡n 1 â”‚  88 kg â”‚                                                    â”‚ â”‚
â”‚ â”‚ â”‚ Kiá»‡n 2 â”‚  60 kg â”‚                                                    â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                    â”‚ â”‚
â”‚ â”‚                                                                         â”‚ â”‚
â”‚ â”‚ HÃ“A ÄÆ N NHÃ€ CUNG Cáº¤P:                                                  â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚ â”‚ â”‚ NCC â”‚ CHI TIáº¾T Sáº¢N PHáº¨M          â”‚ TIá»€N HÄ  â”‚ Tá»”NG  â”‚ THIáº¾U â”‚ ğŸ“·   â”‚â”‚ â”‚
â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤â”‚ â”‚
â”‚ â”‚ â”‚  6  â”‚ MÃƒ 721 2 MÃ€U 10X54         â”‚ 1,110    â”‚  20   â”‚   -   â”‚ 2ğŸ“·  â”‚â”‚ â”‚
â”‚ â”‚ â”‚     â”‚ MÃƒ 720 2 MÃ€U 10X57         â”‚          â”‚       â”‚       â”‚      â”‚â”‚ â”‚
â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤â”‚ â”‚
â”‚ â”‚ â”‚  9  â”‚ MÃƒ 099 4 MÃ€U 20X22         â”‚ 2,355    â”‚  125  â”‚   -   â”‚ 0ğŸ“·  â”‚â”‚ â”‚
â”‚ â”‚ â”‚     â”‚ MÃƒ 527 4 MÃ€U 20X15         â”‚          â”‚       â”‚       â”‚      â”‚â”‚ â”‚
â”‚ â”‚ â”‚     â”‚ ... (+6 dÃ²ng)              â”‚          â”‚       â”‚       â”‚      â”‚â”‚ â”‚
â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤â”‚ â”‚
â”‚ â”‚ â”‚ 12  â”‚ MÃƒ ÃO TAY DÃ€I 999 60X25    â”‚ 3,060    â”‚  120  â”‚   -   â”‚ 1ğŸ“·  â”‚â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚ â”‚                               Tá»”NG: â”‚ 13,345   â”‚  445  â”‚   0   â”‚      â”‚ â”‚
â”‚ â”‚                                                                         â”‚ â”‚
â”‚ â”‚ ğŸ”’ CHI PHÃ HÃ€NG Vá»€: XE 50 + CÃ”NG 250 + KHÃCH Sáº N 3,080 = 3,380        â”‚ â”‚
â”‚ â”‚ ğŸ”’ Ghi chÃº: _______________                                            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚ â•â•â• ğŸ“… 05/11/2024 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• [âœï¸] [ğŸ—‘ï¸] [ğŸ“¤]   â”‚
â”‚ â”‚ ...                                                                     â”‚ â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Tab 2: CÃ´ng ná»£ (Admin only)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ğŸ“¦ Theo dÃµi Ä‘Æ¡n hÃ ng]  [ğŸ’° CÃ´ng ná»£ âœ“]                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚ THANH TOÃN TRÆ¯á»šC CHO ÄÆ N Vá»Š GOM HÃ€NG                      [+ ThÃªm TT]      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ NGÃ€Y TT    â”‚ GHI CHÃš        â”‚ Sá» TIá»€N         â”‚ THAO TÃC                 â”‚â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚ â”‚ 03/11/2024 â”‚                â”‚ 100,000         â”‚ [âœï¸] [ğŸ—‘ï¸]               â”‚â”‚
â”‚ â”‚ 05/11/2024 â”‚                â”‚ 100,000         â”‚ [âœï¸] [ğŸ—‘ï¸]               â”‚â”‚
â”‚ â”‚ 08/11/2024 â”‚                â”‚ 80,000          â”‚ [âœï¸] [ğŸ—‘ï¸]               â”‚â”‚
â”‚ â”‚ 08/11/2024 â”‚                â”‚ 1,075           â”‚ [âœï¸] [ğŸ—‘ï¸]               â”‚â”‚
â”‚ â”‚ 08/11/2024 â”‚ Lá»™n Tiá»n       â”‚ 70              â”‚ [âœï¸] [ğŸ—‘ï¸]               â”‚â”‚
â”‚ â”‚ 08/11/2024 â”‚                â”‚ 3,000           â”‚ [âœï¸] [ğŸ—‘ï¸]               â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚ Tá»”NG Káº¾T CÃ”NG Ná»¢                                                         â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”‚                                                                           â”‚
â”‚ â”‚   Î£ Thanh toÃ¡n trÆ°á»›c:        284,145                                     â”‚
â”‚ â”‚   Î£ Tiá»n hÃ³a Ä‘Æ¡n:          - 250,000                                     â”‚
â”‚ â”‚   Î£ Chi phÃ­ hÃ ng vá»:       -   3,680                                     â”‚
â”‚ â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                      â”‚
â”‚ â”‚   CÃ’N Láº I:                    30,465                                     â”‚
â”‚ â”‚                                                                           â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Modal: ThÃªm/Sá»­a Äá»£t hÃ ng

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â• THÃŠM Äá»¢T HÃ€NG Má»šI                                                   [X] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚ NgÃ y Ä‘i hÃ ng: [ğŸ“… 03/11/2024        ]                                      â”‚
â”‚                                                                             â”‚
â”‚ â”â”â” KIá»†N HÃ€NG â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚ â”‚ Kiá»‡n   â”‚ Sá»‘ KG        â”‚         â”‚                                        â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                        â”‚
â”‚ â”‚   1    â”‚ [    88    ] â”‚ [ğŸ—‘ï¸]    â”‚                                        â”‚
â”‚ â”‚   2    â”‚ [    60    ] â”‚ [ğŸ—‘ï¸]    â”‚                                        â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚ [+ ThÃªm kiá»‡n]                                        Tá»•ng: 2 kiá»‡n, 148 kg  â”‚
â”‚                                                                             â”‚
â”‚ â”â”â” HÃ“A ÄÆ N NHÃ€ CUNG Cáº¤P â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚                                                                             â”‚
â”‚ â”Œâ”€ NCC #[  6  ] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                                                                         â”‚ â”‚
â”‚ â”‚ Nháº­p sáº£n pháº©m (Format: MÃƒ [mÃ£] [tÃªn] [sá»‘ mÃ u] MÃ€U [SL]X[giÃ¡]):        â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚ â”‚ â”‚ MÃƒ 721 2 MÃ€U 10X54                                             [ğŸ—‘ï¸]â”‚â”‚ â”‚
â”‚ â”‚ â”‚ MÃƒ 720 2 MÃ€U 10X57                                             [ğŸ—‘ï¸]â”‚â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚ â”‚ [+ ThÃªm dÃ²ng SP]                                                       â”‚ â”‚
â”‚ â”‚                                                                         â”‚ â”‚
â”‚ â”‚ Preview parse:                                                          â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚ â”‚
â”‚ â”‚ â”‚ MÃ£   â”‚ MÃ u  â”‚ SL   â”‚ GiÃ¡   â”‚ ThÃ nh tiá»nâ”‚                             â”‚ â”‚
â”‚ â”‚ â”‚ 721  â”‚ 2    â”‚ 10   â”‚ 54    â”‚ 540      â”‚                              â”‚ â”‚
â”‚ â”‚ â”‚ 720  â”‚ 2    â”‚ 10   â”‚ 57    â”‚ 570      â”‚                              â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚ â”‚
â”‚ â”‚                                                                         â”‚ â”‚
â”‚ â”‚ Tá»•ng tiá»n HÄ: 1,110  |  Tá»•ng mÃ³n: 20                                   â”‚ â”‚
â”‚ â”‚                                                                         â”‚ â”‚
â”‚ â”‚ ğŸ“· áº¢nh hÃ³a Ä‘Æ¡n: [ğŸ“ Chá»n file] [ğŸ“‹ Paste] [ğŸ“· Chá»¥p]                    â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”                                                    â”‚ â”‚
â”‚ â”‚ â”‚ ğŸ“·1 â”‚ ğŸ“·2 â”‚     â”‚                                                    â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜                                                    â”‚ â”‚
â”‚ â”‚                                                                 [ğŸ—‘ï¸ XÃ³a HÄ]â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚ [+ ThÃªm hÃ³a Ä‘Æ¡n NCC má»›i]                                                    â”‚
â”‚                                                                             â”‚
â”‚ â”â”â” ğŸ”’ CHI PHÃ HÃ€NG Vá»€ (Admin only) â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚ â”‚ Loáº¡i chi phÃ­        â”‚ Sá»‘ tiá»n      â”‚         â”‚                           â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                           â”‚
â”‚ â”‚ [XE GIAO HÃ€NG     ] â”‚ [    50    ] â”‚ [ğŸ—‘ï¸]    â”‚                           â”‚
â”‚ â”‚ [CÃ”NG             ] â”‚ [   250    ] â”‚ [ğŸ—‘ï¸]    â”‚                           â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚ [+ ThÃªm chi phÃ­]                                      Tá»•ng chi phÃ­: 300    â”‚
â”‚                                                                             â”‚
â”‚ ğŸ”’ Ghi chÃº Admin:                                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚                                                                       â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         [Há»§y]  [ğŸ’¾ LÆ°u Ä‘á»£t hÃ ng]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Modal: Cáº­p nháº­t Sá»‘ thiáº¿u (sau kiá»ƒm hÃ ng)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“‹ Cáº¬P NHáº¬T Sá» MÃ“N THIáº¾U - Äá»£t 03/11/2024                             [X] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ NCC â”‚ CHI TIáº¾T                   â”‚ Tá»”NG MÃ“N â”‚ THIáº¾U â”‚ GHI CHÃš           â”‚â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚ â”‚  6  â”‚ MÃƒ 721, MÃƒ 720             â”‚    20    â”‚[    ] â”‚ [              ]  â”‚â”‚
â”‚ â”‚  9  â”‚ MÃƒ 099, MÃƒ 527, ...        â”‚   125    â”‚[    ] â”‚ [              ]  â”‚â”‚
â”‚ â”‚ 12  â”‚ MÃƒ ÃO TAY DÃ€I 999, ...     â”‚   120    â”‚[    ] â”‚ [              ]  â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         [Há»§y]  [ğŸ’¾ LÆ°u]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Cáº¥u trÃºc Files

```
/inventory-tracking/
â”œâ”€â”€ index.html                    # Main HTML page
â”œâ”€â”€ main.js                       # Initialization & event handlers
â”œâ”€â”€ config.js                     # Firebase config & constants
â”œâ”€â”€ auth.js                       # Authentication & permission check
â”œâ”€â”€ data-loader.js                # Load data from Firestore
â”œâ”€â”€ table-renderer.js             # Render shipment cards/tables
â”œâ”€â”€ crud-operations.js            # Create, Update, Delete operations
â”œâ”€â”€ modal-shipment.js             # Modal for add/edit shipment
â”œâ”€â”€ modal-shortage.js             # Modal for updating shortage
â”œâ”€â”€ image-upload.js               # Firebase Storage image upload
â”œâ”€â”€ text-parser.js                # Parse product text format
â”œâ”€â”€ filters.js                    # Date range, NCC, product filters
â”œâ”€â”€ search.js                     # Search by product code
â”œâ”€â”€ export.js                     # Export to Excel
â”œâ”€â”€ prepayment.js                 # Tab 2: Prepayment CRUD
â”œâ”€â”€ balance-calculator.js         # Calculate remaining balance
â”œâ”€â”€ edit-history.js               # Track edit history
â”œâ”€â”€ notification-system.js        # Toast notifications
â”œâ”€â”€ permission-helper.js          # Check user permissions
â””â”€â”€ modern.css                    # Styles

/user-management/
â”œâ”€â”€ detailed-permissions-config.js  # â† ThÃªm config cho inventory-tracking
â””â”€â”€ detailed-permissions-ui.js      # â† UI Ä‘á»ƒ quáº£n lÃ½ permissions
```

---

## ğŸ”§ CÃ¡c bÆ°á»›c Implementation

### Phase 1: Setup cÆ¡ báº£n (Files & Structure)
1. Táº¡o folder `/inventory-tracking/`
2. Táº¡o `index.html` vá»›i layout 2 tabs
3. Táº¡o `config.js` vá»›i Firebase config
4. Táº¡o `auth.js` Ä‘á»ƒ check authentication
5. Táº¡o `permission-helper.js` Ä‘á»ƒ check permissions
6. Táº¡o `modern.css` vá»›i styles cÆ¡ báº£n

### Phase 2: Data Layer
7. Táº¡o `data-loader.js` - Load tá»« Firestore
8. Táº¡o `text-parser.js` - Parse format sáº£n pháº©m
9. Táº¡o `balance-calculator.js` - TÃ­nh CÃ’N Láº I

### Phase 3: Tab 1 - Theo dÃµi Ä‘Æ¡n hÃ ng
10. Táº¡o `table-renderer.js` - Render danh sÃ¡ch Ä‘á»£t hÃ ng
11. Táº¡o `modal-shipment.js` - Modal thÃªm/sá»­a Ä‘á»£t hÃ ng
12. Táº¡o `image-upload.js` - Upload áº£nh Firebase Storage
13. Táº¡o `crud-operations.js` - CRUD operations
14. Táº¡o `modal-shortage.js` - Modal cáº­p nháº­t sá»‘ thiáº¿u

### Phase 4: Tab 2 - CÃ´ng ná»£
15. Táº¡o `prepayment.js` - CRUD thanh toÃ¡n trÆ°á»›c
16. Hiá»ƒn thá»‹ tá»•ng káº¿t cÃ´ng ná»£

### Phase 5: Filters & Search
17. Táº¡o `filters.js` - Lá»c theo ngÃ y, NCC
18. Táº¡o `search.js` - TÃ¬m kiáº¿m theo mÃ£ SP

### Phase 6: Export & History
19. Táº¡o `export.js` - Export Excel (theo quyá»n)
20. Táº¡o `edit-history.js` - Lá»‹ch sá»­ chá»‰nh sá»­a

### Phase 7: User Management Integration
21. Cáº­p nháº­t `detailed-permissions-config.js`
22. Cáº­p nháº­t UI quáº£n lÃ½ permissions

### Phase 8: Testing & Polish
23. Test toÃ n bá»™ flow
24. Fix bugs & optimize
25. ThÃªm vÃ o navigation menu

---

## ğŸ“ Format Parse Sáº£n pháº©m

### Regex Pattern

```javascript
// Format: MÃƒ [mÃ£ SP] [tÃªn hÃ ng] [sá»‘ mÃ u] MÃ€U [sá»‘ lÆ°á»£ng]X[giÃ¡]
// VÃ­ dá»¥: MÃƒ 721 2 MÃ€U 10X54
// VÃ­ dá»¥: MÃƒ ÃO TAY DÃ€I 999 60X25

const PRODUCT_REGEX = /^MÃƒ\s+(.+?)\s+(\d+)\s*MÃ€U\s+(\d+)\s*X\s*(\d+)$/i;
// Groups: [1]=mÃ£+tÃªn, [2]=sá»‘ mÃ u, [3]=sá»‘ lÆ°á»£ng, [4]=giÃ¡

// TrÆ°á»ng há»£p khÃ´ng cÃ³ mÃ u (máº·c Ä‘á»‹nh 1 mÃ u)
const PRODUCT_NO_COLOR_REGEX = /^MÃƒ\s+(.+?)\s+(\d+)\s*X\s*(\d+)$/i;
// Groups: [1]=mÃ£+tÃªn, [2]=sá»‘ lÆ°á»£ng, [3]=giÃ¡
```

### Parse Function

```javascript
function parseProductText(text) {
  const trimmed = text.trim().toUpperCase();

  // Try with color
  let match = trimmed.match(PRODUCT_REGEX);
  if (match) {
    return {
      maSP: match[1].trim(),
      soMau: parseInt(match[2]),
      soLuong: parseInt(match[3]),
      giaDonVi: parseInt(match[4]),
      thanhTien: parseInt(match[3]) * parseInt(match[4]),
      rawText: text.trim(),
      isValid: true
    };
  }

  // Try without color (default 1 mÃ u)
  match = trimmed.match(PRODUCT_NO_COLOR_REGEX);
  if (match) {
    return {
      maSP: match[1].trim(),
      soMau: 1,
      soLuong: parseInt(match[2]),
      giaDonVi: parseInt(match[3]),
      thanhTien: parseInt(match[2]) * parseInt(match[3]),
      rawText: text.trim(),
      isValid: true
    };
  }

  return { rawText: text.trim(), isValid: false, error: 'KhÃ´ng parse Ä‘Æ°á»£c' };
}
```

---

## âœ… Checklist hoÃ n thÃ nh

- [ ] Phase 1: Setup cÆ¡ báº£n
- [ ] Phase 2: Data Layer
- [ ] Phase 3: Tab 1 - Theo dÃµi Ä‘Æ¡n hÃ ng
- [ ] Phase 4: Tab 2 - CÃ´ng ná»£
- [ ] Phase 5: Filters & Search
- [ ] Phase 6: Export & History
- [ ] Phase 7: User Management Integration
- [ ] Phase 8: Testing & Polish

---

## ğŸ“Œ Ghi chÃº quan trá»ng

1. **ÄÆ¡n vá»‹ tiá»n**: Ngoáº¡i tá»‡ (khÃ´ng pháº£i VND), hiá»ƒn thá»‹ sá»‘ nguyÃªn
2. **Permission**: Táº¥t cáº£ phÃ¢n quyá»n tÃ¹y chá»‰nh trong User Management
3. **Parse text**: Hybrid approach - nháº­p text tá»± do, há»‡ thá»‘ng parse
4. **Sá»‘ thiáº¿u**: Cáº­p nháº­t sau khi nháº­n & kiá»ƒm hÃ ng
5. **Export Excel**: Chá»‰ export nhá»¯ng field user cÃ³ quyá»n xem
6. **Lá»‹ch sá»­**: Ghi log má»i thay Ä‘á»•i
