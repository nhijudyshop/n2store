# ğŸ“– HÆ¯á»šNG DáºªN Sá»¬ Dá»¤NG CÃ”NG Cá»¤ QUáº¢N LÃ½ ÄÆ N HÃ€NG TPOS

## ğŸ¯ Má»¥c Ä‘Ã­ch
CÃ´ng cá»¥ nÃ y giÃºp báº¡n tÃ¬m kiáº¿m Ä‘Æ¡n hÃ ng vÃ  cáº­p nháº­t sáº£n pháº©m trong Ä‘Æ¡n hÃ ng trÃªn há»‡ thá»‘ng TPOS má»™t cÃ¡ch dá»… dÃ ng.

---

## ğŸ“‹ CÃ¡c bÆ°á»›c thá»±c hiá»‡n

### **BÆ¯á»šC 1: TÃŒM ÄÆ N HÃ€NG**

#### Má»¥c Ä‘Ã­ch
TÃ¬m kiáº¿m cÃ¡c Ä‘Æ¡n hÃ ng trong khoáº£ng thá»i gian nháº¥t Ä‘á»‹nh

#### CÃ¡c trÆ°á»ng cáº§n nháº­p
1. **NgÃ y báº¯t Ä‘áº§u**: Máº·c Ä‘á»‹nh lÃ  2 ngÃ y trÆ°á»›c hÃ´m nay
2. **NgÃ y káº¿t thÃºc**: Máº·c Ä‘á»‹nh lÃ  hÃ´m nay  
3. **Session Index**: MÃ£ phiÃªn lÃ m viá»‡c (máº·c Ä‘á»‹nh: 60)

#### Thao tÃ¡c
- Äiá»u chá»‰nh ngÃ y thÃ¡ng náº¿u cáº§n
- Nháº¥n nÃºt **"TÃ¬m Ä‘Æ¡n hÃ ng"**
- Há»‡ thá»‘ng sáº½ gá»i API:
  ```
  GET https://tomato.tpos.vn/odata/SaleOnline_Order/ODataService.GetView
  ```
- Káº¿t quáº£: Hiá»ƒn thá»‹ danh sÃ¡ch cÃ¡c Ä‘Æ¡n hÃ ng phÃ¹ há»£p

---

### **BÆ¯á»šC 2: CHá»ŒN ÄÆ N HÃ€NG Cáº¦N Sá»¬A**

#### Má»¥c Ä‘Ã­ch
Chá»n Ä‘Æ¡n hÃ ng mÃ  báº¡n muá»‘n cáº­p nháº­t sáº£n pháº©m

#### ThÃ´ng tin hiá»ƒn thá»‹
Má»—i Ä‘Æ¡n hÃ ng sáº½ hiá»ƒn thá»‹:
- **MÃ£ Ä‘Æ¡n hÃ ng** (Code): VD: 251000340
- **TÃªn khÃ¡ch hÃ ng**: VD: Nhi Judy House
- **Sá»‘ Ä‘iá»‡n thoáº¡i**: VD: 0764489844
- **Tá»•ng tiá»n**: VD: 440,000â‚«
- **Sá»‘ lÆ°á»£ng**: VD: 2

#### Thao tÃ¡c
- Click vÃ o Ä‘Æ¡n hÃ ng muá»‘n chá»n (sáº½ sÃ¡ng mÃ u xanh)
- Nháº¥n nÃºt **"Tiáº¿p tá»¥c"**
- Há»‡ thá»‘ng sáº½ gá»i API Ä‘á»ƒ láº¥y chi tiáº¿t:
  ```
  GET https://tomato.tpos.vn/odata/SaleOnline_Order({Id})?$expand=Details,Partner,User,CRMTeam
  ```

---

### **BÆ¯á»šC 3: TÃŒM VÃ€ CHá»ŒN Sáº¢N PHáº¨M**

#### Má»¥c Ä‘Ã­ch
TÃ¬m kiáº¿m vÃ  thÃªm sáº£n pháº©m vÃ o danh sÃ¡ch sáº£n pháº©m má»›i cho Ä‘Æ¡n hÃ ng

#### CÃ¡ch tÃ¬m sáº£n pháº©m
1. **Nháº­p tá»« khÃ³a** vÃ o Ã´ tÃ¬m kiáº¿m:
   - CÃ³ thá»ƒ nháº­p mÃ£ sáº£n pháº©m: `N55`, `N87`, `N152`
   - Hoáº·c tÃªn sáº£n pháº©m: `ÃO BALO`, `QUáº¦N SUÃ”NG`

2. **Nháº¥n Enter** hoáº·c nÃºt **"TÃ¬m"**

3. Há»‡ thá»‘ng gá»i API:
   ```
   GET https://tomato.tpos.vn/odata/Product/OdataService.GetViewV2?Active=true&Name={tá»«_khÃ³a}
   ```

#### ThÃ´ng tin sáº£n pháº©m hiá»ƒn thá»‹
- HÃ¬nh áº£nh sáº£n pháº©m
- TÃªn Ä‘áº§y Ä‘á»§ (VD: [N55] 0610 A3 ÃO BALO Sá»ŒC TAP X ÄEN)
- GiÃ¡ bÃ¡n (VD: 220,000â‚«)

#### ThÃªm sáº£n pháº©m
- Nháº¥n nÃºt **"ThÃªm"** bÃªn cáº¡nh sáº£n pháº©m
- Sáº£n pháº©m sáº½ xuáº¥t hiá»‡n trong pháº§n "Sáº£n pháº©m Ä‘Ã£ chá»n" bÃªn dÆ°á»›i

#### Äiá»u chá»‰nh sá»‘ lÆ°á»£ng
- Trong danh sÃ¡ch "Sáº£n pháº©m Ä‘Ã£ chá»n", báº¡n cÃ³ thá»ƒ:
  - Thay Ä‘á»•i sá»‘ lÆ°á»£ng báº±ng Ã´ nháº­p sá»‘
  - XÃ³a sáº£n pháº©m báº±ng nÃºt **"XÃ³a"**

#### LÆ°u Ã½
- Má»—i sáº£n pháº©m chá»‰ Ä‘Æ°á»£c thÃªm 1 láº§n
- Náº¿u muá»‘n tÄƒng sá»‘ lÆ°á»£ng, hÃ£y Ä‘iá»u chá»‰nh trong Ã´ sá»‘ lÆ°á»£ng

---

### **BÆ¯á»šC 4: Cáº¬P NHáº¬T ÄÆ N HÃ€NG**

#### Má»¥c Ä‘Ã­ch
LÆ°u thay Ä‘á»•i vÃ  cáº­p nháº­t Ä‘Æ¡n hÃ ng lÃªn há»‡ thá»‘ng

#### ThÃ´ng tin xÃ¡c nháº­n
TrÆ°á»›c khi cáº­p nháº­t, kiá»ƒm tra:
- **MÃ£ Ä‘Æ¡n hÃ ng**: Äáº£m báº£o Ä‘Ãºng Ä‘Æ¡n cáº§n sá»­a
- **TÃªn khÃ¡ch hÃ ng**: XÃ¡c nháº­n Ä‘Ãºng khÃ¡ch
- **Sá»‘ sáº£n pháº©m má»›i**: Sá»‘ lÆ°á»£ng sáº£n pháº©m báº¡n Ä‘Ã£ chá»n

#### Thao tÃ¡c
1. Kiá»ƒm tra ká»¹ danh sÃ¡ch sáº£n pháº©m Ä‘Ã£ chá»n
2. Nháº¥n nÃºt **"Cáº­p nháº­t Ä‘Æ¡n hÃ ng"**
3. Há»‡ thá»‘ng sáº½ gá»i API:
   ```
   PUT https://tomato.tpos.vn/odata/SaleOnline_Order({Id})
   ```
4. Äá»£i thÃ´ng bÃ¡o thÃ nh cÃ´ng

#### Káº¿t quáº£
- âœ… **ThÃ nh cÃ´ng**: "Cáº­p nháº­t Ä‘Æ¡n hÃ ng thÃ nh cÃ´ng!"
- âŒ **Lá»—i**: Hiá»ƒn thá»‹ thÃ´ng bÃ¡o lá»—i cá»¥ thá»ƒ

---

## ğŸ”§ GIáº¢I THÃCH Ká»¸ THUáº¬T

### Cáº¥u trÃºc dá»¯ liá»‡u sáº£n pháº©m
Má»—i sáº£n pháº©m trong Ä‘Æ¡n hÃ ng cÃ³ cáº¥u trÃºc:

```javascript
{
  "ProductId": 128005,           // ID sáº£n pháº©m tá»« há»‡ thá»‘ng
  "ProductName": "...",           // TÃªn sáº£n pháº©m
  "ProductNameGet": "[N55] ...",  // TÃªn hiá»ƒn thá»‹ vá»›i mÃ£
  "UOMId": 1,                     // ID Ä‘Æ¡n vá»‹ tÃ­nh
  "UOMName": "CÃ¡i",               // TÃªn Ä‘Æ¡n vá»‹ tÃ­nh
  "Quantity": 1,                  // Sá»‘ lÆ°á»£ng
  "Price": 220000,                // GiÃ¡ bÃ¡n
  "Factor": 1,                    // Há»‡ sá»‘ quy Ä‘á»•i
  "ProductWeight": 0              // Trá»ng lÆ°á»£ng
}
```

### Flow hoáº¡t Ä‘á»™ng
1. **Fetch Orders** â†’ Láº¥y danh sÃ¡ch Ä‘Æ¡n hÃ ng theo Ä‘iá»u kiá»‡n lá»c
2. **Select Order** â†’ Chá»n Ä‘Æ¡n cáº§n sá»­a
3. **Fetch Details** â†’ Láº¥y toÃ n bá»™ thÃ´ng tin Ä‘Æ¡n hÃ ng
4. **Search Products** â†’ TÃ¬m sáº£n pháº©m muá»‘n thÃªm
5. **Build Product List** â†’ XÃ¢y dá»±ng danh sÃ¡ch sáº£n pháº©m má»›i
6. **Update Order** â†’ Gá»­i PUT request vá»›i dá»¯ liá»‡u má»›i

### API Endpoints sá»­ dá»¥ng

| BÆ°á»›c | Method | Endpoint | Má»¥c Ä‘Ã­ch |
|------|--------|----------|----------|
| 1 | GET | `/odata/SaleOnline_Order/ODataService.GetView` | Láº¥y danh sÃ¡ch Ä‘Æ¡n hÃ ng |
| 2 | GET | `/odata/Product/OdataService.GetViewV2` | TÃ¬m kiáº¿m sáº£n pháº©m |
| 3 | GET | `/odata/SaleOnline_Order({Id})` | Láº¥y chi tiáº¿t Ä‘Æ¡n hÃ ng |
| 4 | PUT | `/odata/SaleOnline_Order({Id})` | Cáº­p nháº­t Ä‘Æ¡n hÃ ng |

---

## âš ï¸ LÆ¯U Ã QUAN TRá»ŒNG

### CORS (Cross-Origin Resource Sharing)
- Náº¿u gáº·p lá»—i CORS khi cháº¡y trÃªn localhost, báº¡n cáº§n:
  - Sá»­ dá»¥ng extension nhÆ° "CORS Unblock"
  - Hoáº·c cháº¡y tá»« cÃ¹ng domain vá»›i API
  - Hoáº·c cáº¥u hÃ¬nh CORS trÃªn server

### XÃ¡c thá»±c (Authentication)
- CÃ´ng cá»¥ nÃ y chÆ°a xá»­ lÃ½ authentication
- Báº¡n cáº§n Ä‘áº£m báº£o:
  - ÄÃ£ Ä‘Äƒng nháº­p vÃ o há»‡ thá»‘ng TPOS trÃªn cÃ¹ng trÃ¬nh duyá»‡t
  - Cookie/session cÃ²n hiá»‡u lá»±c
  - Hoáº·c thÃªm token vÃ o header náº¿u cáº§n

### Quyá»n truy cáº­p
- TÃ i khoáº£n cáº§n cÃ³ quyá»n:
  - Xem Ä‘Æ¡n hÃ ng
  - Sá»­a Ä‘Æ¡n hÃ ng
  - Truy cáº­p API

---

## ğŸ› Xá»¬ LÃ Lá»–I THÆ¯á»œNG Gáº¶P

### Lá»—i: "Network Error" hoáº·c "Failed to fetch"
**NguyÃªn nhÃ¢n**: 
- KhÃ´ng káº¿t ná»‘i Ä‘Æ°á»£c vá»›i API
- Váº¥n Ä‘á» CORS

**Giáº£i phÃ¡p**:
- Kiá»ƒm tra káº¿t ná»‘i internet
- Báº­t CORS Unblock extension
- Äáº£m báº£o Ä‘Ã£ Ä‘Äƒng nháº­p TPOS

### Lá»—i: "401 Unauthorized"
**NguyÃªn nhÃ¢n**: ChÆ°a xÃ¡c thá»±c hoáº·c session háº¿t háº¡n

**Giáº£i phÃ¡p**:
- ÄÄƒng nháº­p láº¡i vÃ o TPOS
- Refresh trang vÃ  thá»­ láº¡i

### Lá»—i: "KhÃ´ng tÃ¬m tháº¥y Ä‘Æ¡n hÃ ng"
**NguyÃªn nhÃ¢n**: 
- Sai khoáº£ng thá»i gian
- Sai Session Index

**Giáº£i phÃ¡p**:
- Äiá»u chá»‰nh khoáº£ng ngÃ y
- Kiá»ƒm tra láº¡i Session Index

### Lá»—i: "Sáº£n pháº©m Ä‘Ã£ Ä‘Æ°á»£c thÃªm"
**NguyÃªn nhÃ¢n**: Sáº£n pháº©m Ä‘Ã£ cÃ³ trong danh sÃ¡ch

**Giáº£i phÃ¡p**:
- Náº¿u muá»‘n tÄƒng sá»‘ lÆ°á»£ng, Ä‘iá»u chá»‰nh trong Ã´ sá»‘ lÆ°á»£ng
- KhÃ´ng cáº§n thÃªm láº¡i sáº£n pháº©m

---

## ğŸ’¡ Máº¸O Sá»¬ Dá»¤NG

1. **TÃ¬m kiáº¿m nhanh**: Nháº­p mÃ£ sáº£n pháº©m (VD: N55) sáº½ nhanh hÆ¡n tÃªn Ä‘áº§y Ä‘á»§

2. **Kiá»ƒm tra ká»¹**: LuÃ´n kiá»ƒm tra láº¡i thÃ´ng tin Ä‘Æ¡n hÃ ng trÆ°á»›c khi cáº­p nháº­t

3. **Backup dá»¯ liá»‡u**: NÃªn screenshot hoáº·c ghi chÃº thÃ´ng tin Ä‘Æ¡n hÃ ng cÅ© trÆ°á»›c khi sá»­a

4. **Sá»‘ lÆ°á»£ng**: Máº·c Ä‘á»‹nh lÃ  1, nhá»› Ä‘iá»u chá»‰nh náº¿u cáº§n nhiá»u hÆ¡n

5. **Session Index**: Má»—i phiÃªn live cÃ³ thá»ƒ cÃ³ Session Index khÃ¡c nhau, há»i admin náº¿u khÃ´ng cháº¯c

---

## ğŸ“ Há»– TRá»¢

Náº¿u gáº·p váº¥n Ä‘á» ká»¹ thuáº­t:
- Kiá»ƒm tra console cá»§a trÃ¬nh duyá»‡t (F12)
- Xem chi tiáº¿t lá»—i trong tab Network
- LiÃªn há»‡ team IT Ä‘á»ƒ Ä‘Æ°á»£c há»— trá»£

---

## ğŸš€ Cáº¢I TIáº¾N TRONG TÆ¯Æ NG LAI

CÃ¡c tÃ­nh nÄƒng cÃ³ thá»ƒ bá»• sung:
- [ ] Xá»­ lÃ½ authentication tá»± Ä‘á»™ng
- [ ] LÆ°u lá»‹ch sá»­ cáº­p nháº­t
- [ ] Export/Import danh sÃ¡ch sáº£n pháº©m
- [ ] Cáº­p nháº­t hÃ ng loáº¡t nhiá»u Ä‘Æ¡n
- [ ] TÃ¬m kiáº¿m nÃ¢ng cao vá»›i filter

---

**PhiÃªn báº£n**: 1.0  
**NgÃ y cáº­p nháº­t**: 14/10/2025  
**TÃ¡c giáº£**: Claude AI Assistant
