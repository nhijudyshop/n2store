<!--
  üìñ GHI CH√ö CHO L·∫¨P TR√åNH VI√äN:
  Khi code ph·∫£i ƒë·ªçc th∆∞ m·ª•c https://github.com/nhijudyshop/n2store/tree/main/docs tr∆∞·ªõc!
  ƒê·ªçc c√°c file SHARED_*.md ƒë·ªÉ hi·ªÉu c√°ch s·ª≠ d·ª•ng shared modules.
-->
<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Hub - Qu·∫£n l√Ω kh√°ch h√†ng 360¬∞</title>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- CSS -->
    <link rel="stylesheet" href="css/main.css">
</head>

<body>
    <!-- Sidebar Navigation -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <i data-lucide="zap"></i>
                <span>N2Shop</span>
            </div>
            <button class="sidebar-toggle" id="sidebarToggle">
                <i data-lucide="panel-left-close"></i>
            </button>
        </div>

        <nav class="sidebar-nav" id="sidebarNav">
            <!-- Menu items auto-generated by navigation-modern.js -->
        </nav>

        <div class="sidebar-footer">
            <div class="user-info">
                <div class="user-avatar">
                    <i data-lucide="user-circle"></i>
                </div>
                <div class="user-details">
                    <div class="user-name" id="userName">Admin</div>
                    <div class="user-role">Qu·∫£n tr·ªã vi√™n</div>
                </div>
            </div>
            <button class="btn-permissions" id="btnPermissions">
                <i data-lucide="shield-check"></i>
                <span>Xem Quy·ªÅn C·ªßa T√¥i</span>
            </button>
            <button class="btn-logout" id="btnLogout">
                <i data-lucide="log-out"></i>
                <span>ƒêƒÉng xu·∫•t</span>
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <div class="container">
            <!-- Header -->
            <header class="header">
                <div class="header-content">
                    <h1><i data-lucide="users"></i> Customer Hub - Qu·∫£n l√Ω kh√°ch h√†ng 360¬∞</h1>
                    <div class="header-actions">
                        <button id="addCustomerBtn" class="btn btn-success">
                            <i data-lucide="user-plus"></i> Th√™m kh√°ch h√†ng
                        </button>
                        <button id="refreshBtn" class="btn btn-primary">
                            <i data-lucide="refresh-cw"></i> L√†m m·ªõi
                        </button>
                    </div>
                </div>
            </header>

            <!-- Statistics Cards -->
            <div class="stats-grid" id="statsGrid">
                <div class="stat-card stat-card-total">
                    <div class="stat-icon">
                        <i data-lucide="users"></i>
                    </div>
                    <div class="stat-info">
                        <span class="stat-value" id="statTotalCustomers">0</span>
                        <span class="stat-label">T·ªïng kh√°ch h√†ng</span>
                    </div>
                </div>
                <div class="stat-card stat-card-vip">
                    <div class="stat-icon">
                        <i data-lucide="crown"></i>
                    </div>
                    <div class="stat-info">
                        <span class="stat-value" id="statVIPCount">0</span>
                        <span class="stat-label">Kh√°ch VIP</span>
                    </div>
                </div>
                <div class="stat-card stat-card-warning">
                    <div class="stat-icon">
                        <i data-lucide="alert-triangle"></i>
                    </div>
                    <div class="stat-info">
                        <span class="stat-value" id="statWarningCount">0</span>
                        <span class="stat-label">C·∫£nh b√°o</span>
                    </div>
                </div>
                <div class="stat-card stat-card-danger">
                    <div class="stat-icon">
                        <i data-lucide="skull"></i>
                    </div>
                    <div class="stat-info">
                        <span class="stat-value" id="statDangerCount">0</span>
                        <span class="stat-label">Bom h√†ng</span>
                    </div>
                </div>
                <div class="stat-card stat-card-wallet">
                    <div class="stat-icon">
                        <i data-lucide="wallet"></i>
                    </div>
                    <div class="stat-info">
                        <span class="stat-value" id="statTotalWallet">0ƒë</span>
                        <span class="stat-label">T·ªïng s·ªë d∆∞ v√≠</span>
                    </div>
                </div>
            </div>

            <!-- Search & Filter -->
            <div class="search-filter-section">
                <div class="search-box">
                    <i data-lucide="search"></i>
                    <input type="text" id="searchInput" placeholder="T√¨m theo SƒêT, t√™n, email..." autofocus>
                    <button id="clearSearchBtn" class="btn-clear-search" style="display: none;">
                        <i data-lucide="x"></i>
                    </button>
                </div>
                <div class="filter-buttons">
                    <button class="btn-filter active" data-filter="all">
                        <i data-lucide="list"></i> T·∫•t c·∫£
                    </button>
                    <button class="btn-filter" data-filter="VIP">
                        <i data-lucide="crown"></i> VIP
                    </button>
                    <button class="btn-filter" data-filter="B√¨nh th∆∞·ªùng">
                        <i data-lucide="user"></i> B√¨nh th∆∞·ªùng
                    </button>
                    <button class="btn-filter" data-filter="C·∫£nh b√°o">
                        <i data-lucide="alert-triangle"></i> C·∫£nh b√°o
                    </button>
                    <button class="btn-filter" data-filter="Bom h√†ng">
                        <i data-lucide="bomb"></i> Bom h√†ng
                    </button>
                    <button class="btn-filter" data-filter="Nguy hi·ªÉm">
                        <i data-lucide="skull"></i> Nguy hi·ªÉm
                    </button>
                </div>
            </div>

            <!-- Loading Indicator -->
            <div id="loadingIndicator" class="loading" style="display: none;">
                <i data-lucide="loader-2" class="animate-spin"></i> ƒêang t·∫£i d·ªØ li·ªáu...
            </div>

            <!-- Customer Table -->
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>SƒêT</th>
                            <th>T√™n kh√°ch h√†ng</th>
                            <th>Email</th>
                            <th>Tr·∫°ng th√°i</th>
                            <th>Tier</th>
                            <th>S·ªë d∆∞ v√≠</th>
                            <th>C√¥ng n·ª£</th>
                            <th>T·ªïng ƒë∆°n</th>
                            <th>T·ªïng chi ti√™u</th>
                            <th>Thao t√°c</th>
                        </tr>
                    </thead>
                    <tbody id="customerTableBody">
                        <!-- Data will be inserted here -->
                    </tbody>
                </table>
            </div>

            <!-- Empty State -->
            <div id="emptyState" class="empty-state" style="display: none;">
                <i data-lucide="users"></i>
                <h3>Kh√¥ng t√¨m th·∫•y kh√°ch h√†ng</h3>
                <p>Th·ª≠ thay ƒë·ªïi b·ªô l·ªçc ho·∫∑c t·ª´ kh√≥a t√¨m ki·∫øm</p>
            </div>

            <!-- Pagination -->
            <div class="pagination" id="pagination">
                <button id="prevPageBtn" class="btn btn-secondary" disabled>
                    <i data-lucide="chevron-left"></i> Tr∆∞·ªõc
                </button>
                <span id="pageInfo">Trang 1 / 1</span>
                <button id="nextPageBtn" class="btn btn-secondary" disabled>
                    Sau <i data-lucide="chevron-right"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Add/Edit Customer Modal -->
    <div id="customerModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2><i data-lucide="user-plus"></i> <span id="customerModalTitle">Th√™m kh√°ch h√†ng</span></h2>
                <button class="modal-close" id="closeCustomerModalBtn">&times;</button>
            </div>
            <div class="modal-body">
                <form id="customerForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="customerPhone">
                                <i data-lucide="phone"></i> S·ªë ƒëi·ªán tho·∫°i <span class="required">*</span>
                            </label>
                            <input type="tel" id="customerPhone" required placeholder="0901234567">
                        </div>
                        <div class="form-group">
                            <label for="customerName">
                                <i data-lucide="user"></i> T√™n kh√°ch h√†ng <span class="required">*</span>
                            </label>
                            <input type="text" id="customerName" required placeholder="Nguy·ªÖn VƒÉn A">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="customerEmail">
                                <i data-lucide="mail"></i> Email
                            </label>
                            <input type="email" id="customerEmail" placeholder="email@example.com">
                        </div>
                        <div class="form-group">
                            <label for="customerStatus">
                                <i data-lucide="shield"></i> Tr·∫°ng th√°i
                            </label>
                            <select id="customerStatus">
                                <option value="B√¨nh th∆∞·ªùng">B√¨nh th∆∞·ªùng</option>
                                <option value="VIP">VIP</option>
                                <option value="C·∫£nh b√°o">C·∫£nh b√°o</option>
                                <option value="Bom h√†ng">Bom h√†ng</option>
                                <option value="Nguy hi·ªÉm">Nguy hi·ªÉm</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="customerAddress">
                            <i data-lucide="map-pin"></i> ƒê·ªãa ch·ªâ
                        </label>
                        <textarea id="customerAddress" rows="2" placeholder="Nh·∫≠p ƒë·ªãa ch·ªâ..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="customerTags">
                            <i data-lucide="tags"></i> Tags (ph√¢n c√°ch b·∫±ng d·∫•u ph·∫©y)
                        </label>
                        <input type="text" id="customerTags" placeholder="VIP, Mua s·ªâ, Hay tr·∫£ l·∫°i...">
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <i data-lucide="save"></i> L∆∞u
                        </button>
                        <button type="button" class="btn btn-secondary" id="cancelCustomerBtn">
                            <i data-lucide="x"></i> H·ªßy
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <script src="../js/firebase-config.js"></script>

    <!-- Navigation & Auth -->
    <script src="../js/navigation-modern.js"></script>

    <!-- Page Scripts -->
    <script src="js/config.js"></script>
    <script src="js/customer-service.js"></script>
    <script src="js/customer-list.js"></script>
    <script src="js/main.js"></script>

    <!-- Initialize Lucide Icons -->
    <script>
        lucide.createIcons();
    </script>
</body>

</html>
