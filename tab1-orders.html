<!doctype html>
<html lang="vi">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Qu·∫£n l√Ω ƒë∆°n h√†ng</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="stylesheet" href="tab1-orders.css" />
    <link rel="stylesheet" href="message-template-modal.css" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>

<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div style="
                    background: white;
                    padding: 32px;
                    border-radius: 12px;
                    text-align: center;
                ">
            <div class="loading-spinner" style="margin: 0 auto 16px"></div>
            <div class="loading-text" style="font-size: 14px; color: #6b7280">
                ƒêang t·∫£i d·ªØ li·ªáu...
            </div>
        </div>
    </div>
    <!-- Scroll to Top Button -->
    <button class="scroll-to-top" id="scrollToTopBtn">
        <i class="fas fa-arrow-up"></i>
    </button>
    <!-- Main Content -->
    <div class="main-content">
        <!-- Filter Section -->
        <div class="filter-section">
            <label>Kho·∫£ng t·∫£i:</label>
            <select id="skipRangeFilter" style="min-width: 150px">
                <option value="0" selected>3000 ƒë·∫ßu ti√™n</option>
                <option value="3000">3000 ti·∫øp theo</option>
                <option value="6000">3000 th·ª© 3</option>
                <option value="9000">3000 th·ª© 4</option>
                <option value="12000">3000 th·ª© 5</option>
            </select>
            <button class="btn-primary" id="loadCampaignsBtn" style="background: #8b5cf6">
                <i class="fas fa-sync-alt"></i>
                T·∫£i Chi·∫øn D·ªãch
            </button>
            <label>Chi·∫øn d·ªãch Live:</label>
            <select id="campaignFilter" style="min-width: 300px">
                <option value="">ƒêang t·∫£i...</option>
            </select>
            <label>T·ª´ ng√†y:</label>
            <input type="datetime-local" id="startDate" />
            <label>ƒê·∫øn ng√†y:</label>
            <input type="datetime-local" id="endDate" />
            <label>Tin nh·∫Øn:</label>
            <select id="messagesUnreadFilter" style="min-width: 150px" onchange="performTableSearch()">
                <option value="all" selected>T·∫•t c·∫£</option>
                <option value="unread">Ch∆∞a ƒë·ªçc</option>
                <option value="read">ƒê√£ ƒë·ªçc</option>
            </select>
            <label>B√¨nh lu·∫≠n:</label>
            <select id="commentsUnreadFilter" style="min-width: 150px" onchange="performTableSearch()">
                <option value="all" selected>T·∫•t c·∫£</option>
                <option value="unread">Ch∆∞a ƒë·ªçc</option>
                <option value="read">ƒê√£ ƒë·ªçc</option>
            </select>
            <button class="btn-primary" id="clearCacheBtn" style="background: #ef4444">
                <i class="fas fa-trash"></i>
                X√≥a Cache
            </button>
            <button class="btn-primary" id="pancakeSettingsBtn" onclick="openPancakeSettingsModal()"
                style="background: #8b5cf6">
                <i class="fas fa-cog"></i>
                C√†i ƒë·∫∑t Pancake
            </button>
            <button class="btn-primary" id="chatApiToggleBtn" onclick="toggleChatAPISource()"
                style="background: #3b82f6" title="Ch·ªçn ngu·ªìn API ƒë·ªÉ hi·ªÉn th·ªã tin nh·∫Øn/b√¨nh lu·∫≠n">
                <i class="fas fa-exchange-alt"></i>
                <span id="chatApiSourceLabel">Pancake API</span>
            </button>
        </div>

        <!-- Action Buttons Section (New) -->
        <div class="action-buttons-section" style="padding: 16px 24px; display: none; gap: 12px; flex-wrap: wrap;"
            id="actionButtonsSection">
            <div style="display: flex; gap: 8px; align-items: center;">
                <span style="color: #6b7280; font-size: 13px; font-weight: 500;">
                    <span id="selectedOrdersCount">0</span> ƒë∆°n ƒë∆∞·ª£c ch·ªçn
                </span>
            </div>
            <button class="btn-message-action" id="assignEmptyCartTagBtn" style="
                        padding: 10px 20px;
                        background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
                        color: white;
                        border: none;
                        border-radius: 8px;
                        font-size: 14px;
                        font-weight: 500;
                        cursor: pointer;
                        display: flex;
                        align-items: center;
                        gap: 8px;
                        transition: all 0.2s;
                    "
                onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(245, 158, 11, 0.3)';"
                onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';">
                <i class="fas fa-tags"></i>
                G√°n tag "GI·ªé TR·ªêNG"
            </button>
            <button class="btn-message-action" id="sendMessageBtn" onclick="openMessageTemplateModal()" style="
                        padding: 10px 20px;
                        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
                        color: white;
                        border: none;
                        border-radius: 8px;
                        font-size: 14px;
                        font-weight: 500;
                        cursor: pointer;
                        display: flex;
                        align-items: center;
                        gap: 8px;
                        transition: all 0.2s;
                    "
                onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(16, 185, 129, 0.3)';"
                onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';">
                <i class="fab fa-facebook-messenger"></i>
                G·ª≠i tin nh·∫Øn
            </button>
            <button class="btn-message-action" id="sendOrderConfirmBtn" style="
                        padding: 10px 20px;
                        background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
                        color: white;
                        border: none;
                        border-radius: 8px;
                        font-size: 14px;
                        font-weight: 500;
                        cursor: pointer;
                        display: flex;
                        align-items: center;
                        gap: 8px;
                        transition: all 0.2s;
                    "
                onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(59, 130, 246, 0.3)';"
                onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';">
                <i class="fas fa-paper-plane"></i>
                G·ª≠i l·∫°i tin ch·ªët ƒë∆°n
            </button>
        </div>

        <!-- Stats Bar -->
        <div class="stats-bar" id="statsBar" style="display: none">
            <div class="stats-item">
                <div class="stats-value" id="totalOrdersCount">0</div>
                <div class="stats-label">T·ªïng ƒë∆°n h√†ng</div>
            </div>
            <div class="stats-item">
                <div class="stats-value" id="displayedOrdersCount">0</div>
                <div class="stats-label">ƒêang hi·ªÉn th·ªã</div>
            </div>
            <div class="stats-item">
                <div class="stats-value" id="totalAmountSum">0ƒë</div>
                <div class="stats-label">T·ªïng gi√° tr·ªã</div>
            </div>
            <div class="stats-item">
                <div class="stats-value" id="loadingProgress">0%</div>
                <div class="stats-label">Ti·∫øn ƒë·ªô</div>
            </div>
        </div>
        <!-- Info Banner -->
        <div class="info-banner" id="infoBanner" style="display: none">
            <i class="fas fa-info-circle"></i>
            <span id="infoText"></span>
        </div>
        <!-- Search Section -->
        <div class="search-section" id="searchSection">
            <div class="search-wrapper">
                <i class="fas fa-search search-icon"></i>
                <input type="text" class="search-input" id="tableSearchInput"
                    placeholder="T√¨m ki·∫øm theo m√£ ƒêH, t√™n kh√°ch h√†ng, SƒêT, ƒë·ªãa ch·ªâ, ghi ch√∫, tr·∫°ng th√°i..."
                    autocomplete="off" />
                <button class="search-clear" id="searchClearBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="search-info">
                <div>
                    <span class="search-result-count" id="searchResultCount">0</span>
                    <span> k·∫øt qu·∫£</span>
                </div>
                <div style="display: flex; align-items: center; gap: 12px;">
                    <div class="search-tips">üí° G√µ ƒë·ªÉ t√¨m ki·∫øm nhanh</div>
                    <button class="btn-column-settings" id="columnSettingsBtn" onclick="openColumnSettingsModal()">
                        <i class="fas fa-columns"></i> C√†i ƒë·∫∑t c·ªôt
                    </button>
                </div>
            </div>
        </div>
        <!-- Table Container -->
        <div class="table-container" id="tableContainer" style="display: none">
            <div class="table-wrapper" id="tableWrapper">
                <table class="table">
                    <thead>
                        <tr>
                            <th>
                                <input type="checkbox" id="selectAll" />
                            </th>
                            <th data-column="stt">STT</th>
                            <th data-column="order-code">M√£ ƒêH</th>
                            <th data-column="customer">Kh√°ch h√†ng</th>
                            <th data-column="messages">Tin nh·∫Øn</th>
                            <th data-column="comments">B√¨nh lu·∫≠n</th>
                            <th data-column="phone">SƒêT</th>
                            <th data-column="address">ƒê·ªãa ch·ªâ</th>
                            <th data-column="notes">Ghi ch√∫</th>
                            <th data-column="total">T·ªïng ti·ªÅn</th>
                            <th data-column="quantity">SL</th>
                            <th data-column="created-date">Ng√†y t·∫°o</th>
                            <th data-column="status">Tr·∫°ng th√°i</th>
                            <th>Thao t√°c</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <tr>
                            <td colspan="14" style="text-align: center; padding: 40px">
                                Vui l√≤ng ch·ªçn chi·∫øn d·ªãch v√† b·∫•m T√¨m ki·∫øm
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- Pagination Info -->
            <div class="pagination-wrapper">
                <div id="pageInfo">Hi·ªÉn th·ªã 0 - 0 c·ªßa 0</div>
                <div style="color: #6b7280; font-size: 12px" id="scrollHint"></div>
            </div>
        </div>
    </div>
    <!-- Tag Management Modal -->
    <div class="tag-modal" id="tagModal">
        <div class="tag-modal-content">
            <div class="tag-modal-header">
                <h3><i class="fas fa-tags"></i> Qu·∫£n l√Ω Tag</h3>
                <button class="tag-modal-close" onclick="closeTagModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="tag-modal-body">
                <!-- Search -->
                <div class="tag-search">
                    <div class="tag-search-wrapper">
                        <input type="text" id="tagSearchInput" placeholder="T√¨m ki·∫øm tag..." oninput="filterTags()" />
                        <i class="fas fa-search tag-search-icon"></i>
                    </div>
                </div>
                <!-- Selected Tags -->
                <div class="selected-tags">
                    <span class="selected-tags-label">ƒê√£ ch·ªçn:</span>
                    <div class="selected-tags-list" id="selectedTagsList">
                        <span style="color: #9ca3af; font-size: 12px">
                            Ch∆∞a c√≥ tag n√†o ƒë∆∞·ª£c ch·ªçn
                        </span>
                    </div>
                </div>
                <!-- Tag List -->
                <div class="tag-list" id="tagList">
                    <div class="no-tags-message">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>ƒêang t·∫£i danh s√°ch tag...</p>
                    </div>
                </div>
            </div>
            <div class="tag-modal-footer">
                <button class="tag-btn-cancel" onclick="closeTagModal()">
                    H·ªßy
                </button>
                <button class="tag-btn-save" onclick="saveOrderTags()">
                    <i class="fas fa-save"></i> L∆∞u
                </button>
            </div>
        </div>
    </div>

    <!-- Column Settings Modal -->
    <div class="column-settings-modal" id="columnSettingsModal">
        <div class="column-settings-modal-content">
            <div class="column-settings-modal-header">
                <h3><i class="fas fa-columns"></i> C√†i ƒë·∫∑t hi·ªÉn th·ªã c·ªôt</h3>
                <button class="column-settings-modal-close" onclick="closeColumnSettingsModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="column-settings-modal-body">
                <p style="color: #6b7280; font-size: 13px; margin-bottom: 16px;">
                    Ch·ªçn c√°c c·ªôt b·∫°n mu·ªën hi·ªÉn th·ªã trong b·∫£ng:
                </p>
                <div class="column-settings-list" id="columnSettingsList">
                    <label class="column-setting-item">
                        <input type="checkbox" data-column="stt" checked />
                        <span>STT</span>
                    </label>
                    <label class="column-setting-item">
                        <input type="checkbox" data-column="order-code" checked />
                        <span>M√£ ƒë∆°n h√†ng</span>
                    </label>
                    <label class="column-setting-item">
                        <input type="checkbox" data-column="customer" checked />
                        <span>Kh√°ch h√†ng</span>
                    </label>
                    <label class="column-setting-item">
                        <input type="checkbox" data-column="messages" checked />
                        <span>Tin nh·∫Øn</span>
                    </label>
                    <label class="column-setting-item">
                        <input type="checkbox" data-column="comments" checked />
                        <span>B√¨nh lu·∫≠n</span>
                    </label>
                    <label class="column-setting-item">
                        <input type="checkbox" data-column="phone" checked />
                        <span>S·ªë ƒëi·ªán tho·∫°i</span>
                    </label>
                    <label class="column-setting-item">
                        <input type="checkbox" data-column="address" checked />
                        <span>ƒê·ªãa ch·ªâ</span>
                    </label>
                    <label class="column-setting-item">
                        <input type="checkbox" data-column="notes" checked />
                        <span>Ghi ch√∫</span>
                    </label>
                    <label class="column-setting-item">
                        <input type="checkbox" data-column="total" checked />
                        <span>T·ªïng ti·ªÅn</span>
                    </label>
                    <label class="column-setting-item">
                        <input type="checkbox" data-column="quantity" checked />
                        <span>S·ªë l∆∞·ª£ng</span>
                    </label>
                    <label class="column-setting-item">
                        <input type="checkbox" data-column="created-date" checked />
                        <span>Ng√†y t·∫°o</span>
                    </label>
                    <label class="column-setting-item">
                        <input type="checkbox" data-column="status" checked />
                        <span>Tr·∫°ng th√°i</span>
                    </label>
                </div>
            </div>
            <div class="column-settings-modal-footer">
                <button class="column-settings-btn-reset" onclick="resetColumnSettings()">
                    <i class="fas fa-undo"></i> ƒê·∫∑t l·∫°i m·∫∑c ƒë·ªãnh
                </button>
                <div style="display: flex; gap: 8px;">
                    <button class="column-settings-btn-cancel" onclick="closeColumnSettingsModal()">
                        H·ªßy
                    </button>
                    <button class="column-settings-btn-save" onclick="saveColumnSettings()">
                        <i class="fas fa-save"></i> L∆∞u
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Chat Messages Modal -->
    <div class="chat-modal" id="chatModal">
        <div class="chat-modal-content">
            <div class="chat-modal-header">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <i class="fab fa-facebook-messenger" style="color: #0084ff; font-size: 24px;"></i>
                    <div>
                        <h3 id="chatModalTitle">Tin nh·∫Øn</h3>
                        <p id="chatModalSubtitle" style="margin: 0; font-size: 12px;"></p>
                    </div>
                </div>
                <button class="chat-modal-close" onclick="closeChatModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="chat-modal-body" id="chatModalBody">
                <div class="chat-loading">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>ƒêang t·∫£i tin nh·∫Øn...</p>
                </div>
            </div>
            <!-- Reply Input (ch·ªâ hi·ªÉn th·ªã cho comments) -->
            <div class="chat-reply-container" id="chatReplyContainer" style="display: none;">
                <div style="display: flex; flex-direction: column; border-top: 1px solid #e5e7eb; background: #fff;">
                    <!-- Toolbar -->
                    <div
                        style="display: flex; align-items: center; padding: 8px 12px; border-bottom: 1px solid #f0f0f0;">
                        <style>
                            .new-reply-box-btn {
                                display: inline-flex;
                                align-items: center;
                                justify-content: center;
                                width: 32px;
                                height: 32px;
                                border-radius: 4px;
                                cursor: pointer;
                                color: #595959;
                                transition: all 0.2s;
                            }

                            .new-reply-box-btn:hover {
                                background-color: #f5f5f5;
                                color: #1890ff;
                            }

                            .new-reply-box-btn svg {
                                width: 20px;
                                height: 20px;
                            }
                        </style>
                        <div
                            style="flex-grow: 1; display: flex; align-items: center; gap: 4px; height: 28px; padding-right: 8px;">
                            <!-- File/Image Upload -->
                            <!-- Image Upload -->
                            <span class="new-reply-box-btn" onclick="document.getElementById('uploadFileInput').click()"
                                title="G·ª≠i ·∫£nh">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                                    viewBox="0 0 256 256">
                                    <path
                                        d="M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm-40,120H80a8,8,0,0,1,0-16h96a8,8,0,0,1,0,16Zm0-32H80a8,8,0,0,1,0-16h96a8,8,0,0,1,0,16Z"
                                        opacity="0.2"></path>
                                    <path
                                        d="M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40ZM40,56H216V188.69l-45.66-45.66a8,8,0,0,0-11.31,0L96,206.06V200H40ZM96,200v-7.06L164.69,137.38,216,188.69V200Z">
                                    </path>
                                    <circle cx="84" cy="84" r="12"></circle>
                                </svg>
                            </span>

                            <!-- File Upload -->
                            <span class="new-reply-box-btn" onclick="document.getElementById('uploadFileInput').click()"
                                title="G·ª≠i file">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                                    viewBox="0 0 256 256">
                                    <path
                                        d="M209.66,122.34a8,8,0,0,1,0,11.32l-82.05,82a56,56,0,0,1-79.2-79.21L147.67,35.73a40,40,0,1,1,56.61,56.55L105,193A24,24,0,1,1,71,159L154.3,74.38A8,8,0,1,1,165.7,85.6L82.39,170.31a8,8,0,1,0,11.27,11.36L192.93,81A24,24,0,1,0,159,47L59.76,147.68a40,40,0,1,0,56.53,56.62l82.06-82A8,8,0,0,1,209.66,122.34Z">
                                    </path>
                                </svg>
                            </span>

                            <!-- Microphone -->
                            <span class="new-reply-box-btn" onclick="handleMicClick()" id="chatMicBtn"
                                title="G·ª≠i ghi √¢m">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                                    viewBox="0 0 256 256">
                                    <path
                                        d="M128,176a48.05,48.05,0,0,0,48-48V64a48,48,0,0,0-96,0v64A48.05,48.05,0,0,0,128,176ZM96,64a32,32,0,0,1,64,0v64a32,32,0,0,1-64,0Zm40,143.6V232a8,8,0,0,1-16,0V207.6A80.11,80.11,0,0,1,48,128a8,8,0,0,1,16,0,64,64,0,0,0,128,0,8,8,0,0,1,16,0A80.11,80.11,0,0,1,136,207.6Z">
                                    </path>
                                </svg>
                            </span>

                            <!-- Hidden File Input -->
                            <input id="uploadFileInput" type="file" multiple=""
                                accept="image/*,video/*,audio/*,.pdf,.doc,.docx,.xls,.xlsx" style="display: none;"
                                onchange="handleFileUpload(this)">

                            <div>
                                <div><span class="ant-badge badge-photos hide-count css-62vojk"><span
                                            class="new-reply-box-btn "><svg xmlns="http://www.w3.org/2000/svg"
                                                width="24" height="24" fill="currentColor" viewBox="0 0 256 256">
                                                <path
                                                    d="M216,40H72A16,16,0,0,0,56,56V72H40A16,16,0,0,0,24,88V200a16,16,0,0,0,16,16H184a16,16,0,0,0,16-16V184h16a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40ZM172,72a12,12,0,1,1-12,12A12,12,0,0,1,172,72Zm12,128H40V88H56v80a16,16,0,0,0,16,16H184Zm32-32H72V120.69l30.34-30.35a8,8,0,0,1,11.32,0L163.31,140,189,114.34a8,8,0,0,1,11.31,0L216,130.07V168Z">
                                                </path>
                                            </svg></span><span class="badge-photos__quick-deselect hide"><svg
                                                xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="#FFF"
                                                viewBox="0 0 256 256">
                                                <path
                                                    d="M208.49,191.51a12,12,0,0,1-17,17L128,145,64.49,208.49a12,12,0,0,1-17-17L111,128,47.51,64.49a12,12,0,0,1,17-17L128,111l63.51-63.52a12,12,0,0,1,17,17L145,128Z">
                                                </path>
                                            </svg></span></span></div>
                            </div>
                            <div><span class="ant-badge badge-photos hide-count css-62vojk"><span class="select-files"
                                        style="display: inline-block; float: right;"><span
                                            class="new-reply-box-btn"><svg xmlns="http://www.w3.org/2000/svg" width="24"
                                                height="24" fill="currentColor" viewBox="0 0 256 256">
                                                <path
                                                    d="M209.66,122.34a8,8,0,0,1,0,11.32l-82.05,82a56,56,0,0,1-79.2-79.21L147.67,35.73a40,40,0,1,1,56.61,56.55L105,193A24,24,0,1,1,71,159L154.3,74.38A8,8,0,1,1,165.7,85.6L82.39,170.31a8,8,0,1,0,11.27,11.36L192.93,81A24,24,0,1,0,159,47L59.76,147.68a40,40,0,1,0,56.53,56.62l82.06-82A8,8,0,0,1,209.66,122.34Z">
                                                </path>
                                            </svg></span></span><span class="badge-photos__quick-deselect hide"><svg
                                            xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="#FFF"
                                            viewBox="0 0 256 256">
                                            <path
                                                d="M208.49,191.51a12,12,0,0,1-17,17L128,145,64.49,208.49a12,12,0,0,1-17-17L111,128,47.51,64.49a12,12,0,0,1,17-17L128,111l63.51-63.52a12,12,0,0,1,17,17L145,128Z">
                                            </path>
                                        </svg></span></span>
                                <style>
                                    .file-list .file-item {
                                        position: relative;
                                        cursor: pointer;
                                        color: rgba(24, 144, 255, .6);
                                        border-radius: 8px;
                                        display: -webkit-box;
                                        display: -ms-flexbox;
                                        display: flex;
                                        -webkit-box-align: center;
                                        -ms-flex-align: center;
                                        align-items: center;
                                        -webkit-box-pack: justify;
                                        -ms-flex-pack: justify;
                                        justify-content: space-between;
                                        padding: 8px;
                                        margin-bottom: 4px !important
                                    }

                                    .file-list .file-item .file-item-section {
                                        display: -webkit-box;
                                        display: -ms-flexbox;
                                        display: flex;
                                        -webkit-box-align: center;
                                        -ms-flex-align: center;
                                        align-items: center
                                    }

                                    .file-list .file-item .file-uploading {
                                        position: absolute;
                                        width: 100%;
                                        height: 100%;
                                        z-index: 1;
                                        background-color: rgba(18, 191, 213, .3);
                                        -webkit-animation: uploadProgress 1.5s infinite;
                                        animation: uploadProgress 1.5s infinite;
                                        left: 0;
                                        border-radius: 8px
                                    }

                                    .file-list .file-item .icon-file {
                                        color: gray;
                                        background-color: #fff;
                                        height: 60px;
                                        width: 60px;
                                        display: -webkit-box;
                                        display: -ms-flexbox;
                                        display: flex;
                                        -webkit-box-pack: center;
                                        -ms-flex-pack: center;
                                        justify-content: center;
                                        -webkit-box-align: center;
                                        -ms-flex-align: center;
                                        align-items: center;
                                        border: 1px solid #d9d9d9;
                                        border-radius: 12px;
                                        margin-right: 12px;
                                        overflow: hidden
                                    }

                                    .file-list .file-item .file-name-wrapper {
                                        max-width: 210px;
                                        display: -webkit-box;
                                        display: -ms-flexbox;
                                        display: flex;
                                        -webkit-box-orient: vertical;
                                        -webkit-box-direction: normal;
                                        -ms-flex-direction: column;
                                        flex-direction: column
                                    }

                                    .file-list .file-item .file-name-wrapper .file-rename-input {
                                        width: 314px;
                                        height: 30px;
                                        margin-bottom: 2px
                                    }

                                    .file-list .file-item .file-name-wrapper .file-name {
                                        -webkit-box-flex: 1;
                                        -ms-flex-positive: 1;
                                        flex-grow: 1;
                                        color: rgba(0, 0, 0, .85);
                                        font-size: 14px;
                                        line-height: 22px
                                    }

                                    .file-list .file-item .file-name-wrapper .file-type {
                                        color: #98a2b3;
                                        font-size: 12px;
                                        font-weight: 400;
                                        line-height: 16px
                                    }

                                    .file-list .file-item .action-icon-wrapper {
                                        display: -webkit-box;
                                        display: -ms-flexbox;
                                        display: flex;
                                        -webkit-box-align: center;
                                        -ms-flex-align: center;
                                        align-items: center;
                                        gap: 2px
                                    }

                                    .file-list .file-item .action-icon-wrapper .action-icon {
                                        opacity: 0;
                                        padding: 3px;
                                        border-radius: 6px;
                                        color: #344054
                                    }

                                    .file-list .file-item .action-icon-wrapper .action-icon:hover {
                                        background-color: #f5f5f5;
                                    }

                                    .file-list .file-item .action-icon-wrapper .pinned {
                                        opacity: 1
                                    }

                                    .file-list .file-item .action-icon-wrapper .delete-file-popconfirm .ant-popover-inner {
                                        padding: 12px
                                    }

                                    .file-list .file-item .action-icon-wrapper .delete-icon {
                                        display: block;
                                        color: #cf1322
                                    }

                                    .file-list .file-item .video-thumbnail-wrapper {
                                        position: relative
                                    }

                                    .file-list .file-item .video-thumbnail-wrapper .video-thumbnail {
                                        width: 60px;
                                        height: 60px;
                                        -o-object-fit: cover;
                                        object-fit: cover
                                    }

                                    .file-list .file-item .video-thumbnail-wrapper .play-btn {
                                        border-radius: 100px;
                                        z-index: 1000;
                                        position: absolute;
                                        top: calc(50% - 15px);
                                        left: calc(50% - 16px);
                                        padding: 5px;
                                        cursor: pointer;
                                        border: 3px solid hsla(0, 0%, 100%, .3);
                                        background-color: rgba(20, 20, 20, .3)
                                    }

                                    .file-list .file-item:hover {
                                        background-color: #f2f4f7
                                    }

                                    .file-list .file-item:hover .action-icon {
                                        opacity: 1
                                    }

                                    .file-list .selected {
                                        background-color: #e2f2ff !important
                                    }

                                    .file-list .selected:hover {
                                        background-color: #d2ebff !important
                                    }

                                    .file-list .uploading {
                                        background-color: #fff !important
                                    }

                                    .file-list .ReactVirtualized__Grid__innerScrollContainer {
                                        min-height: 320px
                                    }

                                    .file-list .empty-list {
                                        height: 440px;
                                        max-height: none !important;
                                        width: 410px;
                                        outline: none;
                                        padding: 0 4px
                                    }

                                    .upload-file-header-wrapper {
                                        padding: 0 12px
                                    }

                                    .upload-file-header-wrapper .upload-file-header {
                                        display: -webkit-box;
                                        display: -ms-flexbox;
                                        display: flex;
                                        -webkit-box-pack: justify;
                                        -ms-flex-pack: justify;
                                        justify-content: space-between;
                                        -webkit-box-align: center;
                                        -ms-flex-align: center;
                                        align-items: center;
                                        margin-bottom: 8px
                                    }

                                    .upload-file-header-wrapper .upload-file-header .title {
                                        font-size: 16px;
                                        font-weight: 500;
                                        line-height: 24px
                                    }

                                    .upload-file-header-wrapper .upload-file-header .action {
                                        cursor: pointer;
                                        font-size: 14px;
                                        font-weight: 500;
                                        line-height: 22px;
                                        color: #105ce2;
                                        padding: 1px 8px;
                                        border-radius: 6px
                                    }

                                    .upload-file-header-wrapper .upload-file-header .action:hover,
                                    .upload-file-header-wrapper .upload-file-header .action:focus {
                                        background-color: #eaecf0
                                    }

                                    .upload-file-header-wrapper .search-file {
                                        background-color: #eaecf0;
                                        padding: 4px 8px;
                                        margin-bottom: 8px;
                                        border: 1px solid #eaecf0
                                    }

                                    .upload-file-header-wrapper .search-file input {
                                        color: #101828;
                                        font-size: 14px;
                                        font-weight: 400;
                                        line-height: 22px
                                    }

                                    .upload-file-header-wrapper .search-file input::-webkit-input-placeholder {
                                        color: #667085
                                    }

                                    .upload-file-header-wrapper .search-file input::-moz-placeholder {
                                        color: #667085
                                    }

                                    .upload-file-header-wrapper .search-file input::-ms-input-placeholder {
                                        color: #667085
                                    }

                                    .upload-file-header-wrapper .search-file input::placeholder {
                                        color: #667085
                                    }

                                    .upload-file-header-wrapper .search-file:hover {
                                        background-color: #dde1e7
                                    }

                                    .upload-file-header-wrapper .search-file:focus-within {
                                        border: 1px solid #4096ff;
                                        background-color: #fff
                                    }

                                    .file-list-wrapper {
                                        min-width: 300px;
                                        min-height: 392px
                                    }

                                    .file-list-wrapper .custom-infinite-scroll {
                                        padding: 0 4px
                                    }

                                    .file-list::-webkit-scrollbar {
                                        width: 3px
                                    }

                                    .file-list::-webkit-scrollbar-track {
                                        -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, .3);
                                        box-shadow: inset 0 0 6px rgba(0, 0, 0, .3)
                                    }

                                    .file-list::-webkit-scrollbar-thumb {
                                        background-color: #506dad;
                                        outline: 1px solid #708090
                                    }

                                    .popover-upload-file {
                                        z-index: 1051
                                    }

                                    .popover-upload-file .ant-popover-inner {
                                        padding: 12px 0
                                    }

                                    .select-files .file-icon-upload {
                                        position: relative
                                    }

                                    .select-files .file-lenght {
                                        display: inline-block;
                                        position: absolute;
                                        top: -6px;
                                        left: 26px;
                                        width: 15px;
                                        height: 15px;
                                        border-radius: 100px;
                                        z-index: 99;
                                        background-color: red;
                                        color: #fff;
                                        text-align: center;
                                        line-height: 15px;
                                        font-size: 10px
                                    }

                                    .select-files .clear-all-file {
                                        cursor: pointer;
                                        display: inline-block;
                                        position: absolute;
                                        top: -13px;
                                        right: -5px;
                                        width: 15px;
                                        height: 15px;
                                        border-radius: 100px;
                                        z-index: 100;
                                        background-color: #fff;
                                        color: #fff;
                                        text-align: center;
                                        line-height: 15px;
                                        font-size: 10px;
                                        display: none
                                    }

                                    .select-files:hover .clear-all-file {
                                        border: 1px solid red;
                                        display: inline-block
                                    }

                                    .select-files:hover .clear-all-file i {
                                        color: red
                                    }

                                    .hidden {
                                        display: none !important
                                    }

                                    .info-icon {
                                        margin-left: 2px
                                    }

                                    @-webkit-keyframes uploadProgress {
                                        from {
                                            width: 50%
                                        }

                                        to {
                                            width: 100%
                                        }
                                    }

                                    @keyframes uploadProgress {
                                        from {
                                            width: 50%
                                        }

                                        to {
                                            width: 100%
                                        }
                                    }
                                </style>
                            </div><span class="new-reply-box-btn"><svg xmlns="http://www.w3.org/2000/svg" width="24"
                                    height="24" fill="currentColor" viewBox="0 0 256 256">
                                    <path
                                        d="M168,32H88A56.06,56.06,0,0,0,32,88v80a56.06,56.06,0,0,0,56,56h48a8.07,8.07,0,0,0,2.53-.41c26.23-8.75,76.31-58.83,85.06-85.06A8.07,8.07,0,0,0,224,136V88A56.06,56.06,0,0,0,168,32ZM136,207.42V176a40,40,0,0,1,40-40h31.42C198.16,157.55,157.55,198.16,136,207.42Z">
                                    </path>
                                </svg></span>
                            <div><span class="ant-badge badge-photos hide-count css-62vojk"><span
                                        class="icon-send-facebook-product"
                                        style="display: inline-block; float: right;"><span
                                            class="new-reply-box-btn send-product-facebook-icon"><svg
                                                xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                fill="currentColor" viewBox="0 0 256 256">
                                                <path
                                                    d="M247.59,61.22,195.83,33A8,8,0,0,0,192,32H160a8,8,0,0,0-8,8,24,24,0,0,1-48,0,8,8,0,0,0-8-8H64a8,8,0,0,0-3.84,1L8.41,61.22A15.76,15.76,0,0,0,1.82,82.48l19.27,36.81A16.37,16.37,0,0,0,35.67,128H56v80a16,16,0,0,0,16,16H184a16,16,0,0,0,16-16V128h20.34a16.37,16.37,0,0,0,14.58-8.71l19.27-36.81A15.76,15.76,0,0,0,247.59,61.22ZM35.67,112a.62.62,0,0,1-.41-.13L16.09,75.26,56,53.48V112Zm185.07-.14a.55.55,0,0,1-.41.14H200V53.48l39.92,21.78Z">
                                                </path>
                                            </svg>
                                            <div class="new-feature"></div>
                                        </span></span><span class="badge-photos__quick-deselect hide"><svg
                                            xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="#FFF"
                                            viewBox="0 0 256 256">
                                            <path
                                                d="M208.49,191.51a12,12,0,0,1-17,17L128,145,64.49,208.49a12,12,0,0,1-17-17L111,128,47.51,64.49a12,12,0,0,1,17-17L128,111l63.51-63.52a12,12,0,0,1,17,17L145,128Z">
                                            </path>
                                        </svg></span></span>
                                <style>
                                    .popover-fbshop-product,
                                    .shopee-product-popover {
                                        z-index: 2000
                                    }

                                    .popover-fbshop-product .ant-popover-inner,
                                    .shopee-product-popover .ant-popover-inner {
                                        border-radius: 12px;
                                        padding: 0px
                                    }

                                    .popover-fbshop-product .ant-popover-content,
                                    .shopee-product-popover .ant-popover-content {
                                        width: 432px;
                                        background: #fff;
                                        border-radius: 12px
                                    }

                                    .popover-fbshop-product .ant-popover-content .ant-popover-inner-content,
                                    .shopee-product-popover .ant-popover-content .ant-popover-inner-content {
                                        padding: 0px
                                    }

                                    .popover-fbshop-product .ant-popover-content #listProductAction,
                                    .shopee-product-popover .ant-popover-content #listProductAction {
                                        overflow: hidden;
                                        height: 0;
                                        opacity: 0;
                                        -webkit-transition: all .5s;
                                        transition: all .5s
                                    }

                                    .popover-fbshop-product .ant-popover-content .list-products-content,
                                    .shopee-product-popover .ant-popover-content .list-products-content {
                                        width: 432px;
                                        height: 525px;
                                        position: relative;
                                        display: -webkit-box;
                                        display: -ms-flexbox;
                                        display: flex;
                                        -webkit-box-orient: vertical;
                                        -webkit-box-direction: normal;
                                        -ms-flex-direction: column;
                                        flex-direction: column;
                                        gap: 0
                                    }

                                    .popover-fbshop-product .ant-popover-content .list-products-content .list-products-action,
                                    .shopee-product-popover .ant-popover-content .list-products-content .list-products-action {
                                        position: absolute;
                                        width: 432px;
                                        display: -webkit-box;
                                        display: -ms-flexbox;
                                        display: flex;
                                        -webkit-box-orient: vertical;
                                        -webkit-box-direction: normal;
                                        -ms-flex-direction: column;
                                        flex-direction: column;
                                        -webkit-box-pack: center;
                                        -ms-flex-pack: center;
                                        justify-content: center;
                                        z-index: 999;
                                        bottom: 0;
                                        padding: 8px 16px;
                                        border-radius: 0 12px;
                                        background: #fff;
                                        -webkit-box-shadow: 0px 1px 0px 0px #f0f0f0 inset;
                                        box-shadow: 0px 1px 0px 0px #f0f0f0 inset
                                    }

                                    .popover-fbshop-product .ant-popover-content .list-products-content .list-products-action .list-products-action-title,
                                    .shopee-product-popover .ant-popover-content .list-products-content .list-products-action .list-products-action-title {
                                        color: #667085;
                                        line-height: 22px;
                                        margin-bottom: 4px
                                    }

                                    .popover-fbshop-product .ant-popover-content .list-products-content .list-products-action .list-products-action-button,
                                    .shopee-product-popover .ant-popover-content .list-products-content .list-products-action .list-products-action-button {
                                        display: -webkit-box;
                                        display: -ms-flexbox;
                                        display: flex;
                                        gap: 12px
                                    }

                                    .popover-fbshop-product .ant-popover-content .list-products-content .list-products-action .list-products-action-button button,
                                    .shopee-product-popover .ant-popover-content .list-products-content .list-products-action .list-products-action-button button {
                                        -webkit-box-flex: 1;
                                        -ms-flex: 1 0 0px;
                                        flex: 1 0 0
                                    }

                                    .popover-fbshop-product .ant-popover-content .list-products-content .list-products-scroll,
                                    .shopee-product-popover .ant-popover-content .list-products-content .list-products-scroll {
                                        height: 477px;
                                        display: -webkit-box;
                                        display: -ms-flexbox;
                                        display: flex;
                                        -webkit-box-pack: center;
                                        -ms-flex-pack: center;
                                        justify-content: center;
                                        -webkit-box-align: center;
                                        -ms-flex-align: center;
                                        align-items: center
                                    }

                                    .popover-fbshop-product .ant-popover-content .list-products-content .list-products-scroll.has-warning,
                                    .shopee-product-popover .ant-popover-content .list-products-content .list-products-scroll.has-warning {
                                        height: 349px
                                    }

                                    .popover-fbshop-product .ant-popover-content .list-products-content .connect-catalog-warning-wrap,
                                    .shopee-product-popover .ant-popover-content .list-products-content .connect-catalog-warning-wrap {
                                        padding: 12px;
                                        margin: 0 8px 8px;
                                        background-color: #fff2e8;
                                        color: #667085;
                                        border-radius: 8px
                                    }

                                    .popover-fbshop-product .ant-popover-content .list-products-content .connect-catalog-warning-wrap .connect-catalog-meta-link a,
                                    .shopee-product-popover .ant-popover-content .list-products-content .connect-catalog-warning-wrap .connect-catalog-meta-link a {
                                        text-decoration: underline
                                    }

                                    .popover-fbshop-product .ant-popover-content .list-products-title,
                                    .shopee-product-popover .ant-popover-content .list-products-title {
                                        padding: 8px;
                                        -webkit-box-shadow: none !important;
                                        box-shadow: none !important;
                                        -webkit-box-shadow: 0px -1px 0px 0px #f0f0f0 inset;
                                        box-shadow: 0px -1px 0px 0px #f0f0f0 inset
                                    }

                                    .popover-fbshop-product .ant-popover-content .list-products-title .back-to-list-products-button,
                                    .shopee-product-popover .ant-popover-content .list-products-title .back-to-list-products-button {
                                        cursor: pointer;
                                        border-radius: 6px;
                                        padding: 0 4px;
                                        display: -webkit-box;
                                        display: -ms-flexbox;
                                        display: flex;
                                        -webkit-box-pack: center;
                                        -ms-flex-pack: center;
                                        justify-content: center;
                                        -webkit-box-align: center;
                                        -ms-flex-align: center;
                                        align-items: center
                                    }

                                    .popover-fbshop-product .ant-popover-content .list-products-title .back-to-list-products-button,
                                    .shopee-product-popover .ant-popover-content .list-products-title .back-to-list-products-button:hover,
                                    .shopee-product-popover .ant-popover-content .list-products-title .back-to-list-products-button:hover {
                                        background: #eaecf0
                                    }

                                    .popover-fbshop-product .ant-popover-content .list-products-title .list-products-title-text,
                                    .shopee-product-popover .ant-popover-content .list-products-title .list-products-title-text {
                                        color: rgba(0, 0, 0, .85);
                                        display: -webkit-box;
                                        display: -ms-flexbox;
                                        display: flex;
                                        gap: 10px;
                                        -webkit-box-align: center;
                                        -ms-flex-align: center;
                                        align-items: center;
                                        font-size: 16px;
                                        font-weight: 500;
                                        line-height: 24px;
                                        padding: 4px 0
                                    }

                                    .popover-fbshop-product .ant-popover-content .list-products-title .list-products-title-text.list,
                                    .shopee-product-popover .ant-popover-content .list-products-title .list-products-title-text.list {
                                        margin-left: 8px
                                    }

                                    .popover-fbshop-product .ant-popover-content .product-notfound-container,
                                    .shopee-product-popover .ant-popover-content .product-notfound-container {
                                        height: 445px;
                                        display: -webkit-box;
                                        display: -ms-flexbox;
                                        display: flex;
                                        -webkit-box-orient: vertical;
                                        -webkit-box-direction: normal;
                                        -ms-flex-direction: column;
                                        flex-direction: column;
                                        -webkit-box-pack: center;
                                        -ms-flex-pack: center;
                                        justify-content: center;
                                        -webkit-box-align: center;
                                        -ms-flex-align: center;
                                        align-items: center;
                                        gap: 2px;
                                        -webkit-box-flex: 1;
                                        -ms-flex: 1 0 0px;
                                        flex: 1 0 0;
                                        padding: 0px 80px
                                    }

                                    .popover-fbshop-product .ant-popover-content .product-notfound-container .product-notfound-image,
                                    .shopee-product-popover .ant-popover-content .product-notfound-container .product-notfound-image {
                                        width: 160px;
                                        height: 160px
                                    }

                                    .popover-fbshop-product .ant-popover-content .product-notfound-container .product-notfound-title,
                                    .shopee-product-popover .ant-popover-content .product-notfound-container .product-notfound-title {
                                        text-align: center;
                                        color: #667085;
                                        font-size: 16px;
                                        line-height: 24px;
                                        font-weight: 500
                                    }

                                    .popover-fbshop-product .ant-popover-content .product-notfound-container .product-notfound-text,
                                    .shopee-product-popover .ant-popover-content .product-notfound-container .product-notfound-text {
                                        text-align: center;
                                        color: #667085;
                                        font-size: 14px;
                                        line-height: 22px;
                                        font-weight: 400
                                    }

                                    .popover-fbshop-product .ant-popover-content .product-error-wrapper,
                                    .shopee-product-popover .ant-popover-content .product-error-wrapper {
                                        height: 445px;
                                        padding: 20px 16px;
                                        display: -webkit-box;
                                        display: -ms-flexbox;
                                        display: flex;
                                        -webkit-box-orient: vertical;
                                        -webkit-box-direction: normal;
                                        -ms-flex-direction: column;
                                        flex-direction: column;
                                        gap: 10px;
                                        border-top: 1px solid #f0f0f0
                                    }

                                    .popover-fbshop-product .ant-popover-content .product-error-wrapper .product-error-footer,
                                    .shopee-product-popover .ant-popover-content .product-error-wrapper .product-error-footer {
                                        display: -webkit-box;
                                        display: -ms-flexbox;
                                        display: flex;
                                        gap: 6px;
                                        color: #667085;
                                        font-size: 12px;
                                        -webkit-box-pack: center;
                                        -ms-flex-pack: center;
                                        justify-content: center;
                                        line-height: 16px
                                    }

                                    .popover-fbshop-product .ant-popover-content .product-error-wrapper .product-error-footer .text-connect-to-pos,
                                    .shopee-product-popover .ant-popover-content .product-error-wrapper .product-error-footer .text-connect-to-pos {
                                        color: #1677ff;
                                        text-decoration: underline !important
                                    }

                                    .popover-fbshop-product .ant-popover-content .product-error-container,
                                    .shopee-product-popover .ant-popover-content .product-error-container {
                                        display: -webkit-box;
                                        display: -ms-flexbox;
                                        display: flex;
                                        -webkit-box-orient: vertical;
                                        -webkit-box-direction: normal;
                                        -ms-flex-direction: column;
                                        flex-direction: column;
                                        -webkit-box-pack: center;
                                        -ms-flex-pack: center;
                                        justify-content: center;
                                        -webkit-box-align: center;
                                        -ms-flex-align: center;
                                        align-items: center;
                                        text-align: center;
                                        -webkit-box-flex: 1;
                                        -ms-flex: 1;
                                        flex: 1
                                    }

                                    .popover-fbshop-product .ant-popover-content .product-error-container .product-error-image,
                                    .shopee-product-popover .ant-popover-content .product-error-container .product-error-image {
                                        width: 160px;
                                        height: 160px
                                    }

                                    .popover-fbshop-product .ant-popover-content .product-error-container .product-error-title,
                                    .shopee-product-popover .ant-popover-content .product-error-container .product-error-title {
                                        color: #344054;
                                        margin-top: 16px;
                                        font-size: 16px;
                                        font-weight: 500;
                                        line-height: 24px;
                                        margin-bottom: 4px
                                    }

                                    .popover-fbshop-product .ant-popover-content .product-error-container .product-error-text,
                                    .shopee-product-popover .ant-popover-content .product-error-container .product-error-text {
                                        color: #475467;
                                        line-height: 22px
                                    }

                                    .popover-fbshop-product .ant-popover-content .product-error-container .product-error-text .text-bold,
                                    .shopee-product-popover .ant-popover-content .product-error-container .product-error-text .text-bold {
                                        font-weight: 700;
                                        color: #000
                                    }

                                    .popover-fbshop-product .ant-popover-content .product-error-container .btn-connect-to-pos,
                                    .shopee-product-popover .ant-popover-content .product-error-container .btn-connect-to-pos {
                                        margin-top: 16px;
                                        border-radius: 6px;
                                        background: #d2ebff;
                                        color: #105ce2;
                                        font-weight: 500;
                                        border: none
                                    }

                                    .popover-fbshop-product .ant-popover-content .product-error-container .btn-connect-to-pos:hover,
                                    .shopee-product-popover .ant-popover-content .product-error-container .btn-connect-to-pos:hover {
                                        background: #d6e1ed
                                    }

                                    .popover-fbshop-product .ant-popover-content .product-error-container .text-connect-to-pos,
                                    .shopee-product-popover .ant-popover-content .product-error-container .text-connect-to-pos {
                                        margin-top: 4px;
                                        color: #105ce2
                                    }

                                    .popover-fbshop-product .ant-popover-content .list-products-body,
                                    .shopee-product-popover .ant-popover-content .list-products-body {
                                        height: 440px;
                                        overflow: auto
                                    }

                                    .popover-fbshop-product .ant-popover-content .list-products-body .ReactVirtualized__Grid__innerScrollContainer,
                                    .shopee-product-popover .ant-popover-content .list-products-body .ReactVirtualized__Grid__innerScrollContainer {
                                        width: 432px !important
                                    }

                                    .popover-fbshop-product .ant-popover-content .list-products-body .catalog-product-item-checked,
                                    .shopee-product-popover .ant-popover-content .list-products-body .catalog-product-item-checked {
                                        background: #eef8ff
                                    }

                                    .popover-fbshop-product .ant-popover-content .list-products-body.list.has-warning,
                                    .shopee-product-popover .ant-popover-content .list-products-body.list.has-warning {
                                        height: 349px !important
                                    }
                                </style>
                            </div><span class="new-reply-box-btn useless-btn"><svg xmlns="http://www.w3.org/2000/svg"
                                    width="24" height="24" fill="currentColor" viewBox="0 0 256 256">
                                    <path
                                        d="M80,128V64a48,48,0,0,1,96,0v64a48,48,0,0,1-96,0Zm128,0a8,8,0,0,0-16,0,64,64,0,0,1-128,0,8,8,0,0,0-16,0,80.11,80.11,0,0,0,72,79.6V240a8,8,0,0,16,0V207.6A80.11,80.11,0,0,0,208,128Z">
                                    </path>
                                </svg></span>
                        </div>
                    </div>

                    <!-- Input Area -->
                    <div style="display: flex; gap: 8px; align-items: center; padding: 12px;">
                        <input type="text" id="chatReplyInput" placeholder="Nh·∫≠p tin nh·∫Øn tr·∫£ l·ªùi..."
                            style="flex: 1; padding: 10px 12px; border: 1px solid #d1d5db; border-radius: 8px; font-size: 14px;"
                            onkeypress="if(event.key==='Enter') sendReplyComment();" />
                        <button class="chat-btn-send" id="chatSendBtn" onclick="sendReplyComment()"
                            style="padding: 10px 20px; background: linear-gradient(135deg, #0084ff 0%, #0066cc 100%); color: white; border: none; border-radius: 8px; font-size: 14px; font-weight: 500; cursor: pointer; display: flex; align-items: center; gap: 8px; transition: all 0.2s;"
                            onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(0, 132, 255, 0.3)';"
                            onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';">
                            <i class="fas fa-paper-plane"></i>
                            G·ª≠i
                        </button>
                    </div>
                </div>
            </div>
            <div class="chat-modal-footer">
                <button class="chat-btn-close" onclick="closeChatModal()">
                    <i class="fas fa-times"></i> ƒê√≥ng
                </button>
                <button class="chat-btn-mark-read" id="chatMarkReadBtn" onclick="markChatAsRead()"
                    style="display: none;">
                    <i class="fas fa-check"></i> ƒê√°nh d·∫•u ƒë√£ ƒë·ªçc
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

    <!-- API Configuration (load first!) -->
    <script src="api-config.js"></script>

    <script src="token-manager.js"></script>
    <script src="cache.js"></script>
    <script src="auth.js"></script>
    <script src="notification-system.js"></script>
    <script src="pancake-token-manager.js"></script>
    <script src="pancake-data-manager.js"></script>
    <script src="chat-api-settings.js"></script>
    <script src="chat-data-manager.js"></script>
    <script src="message-template-manager.js"></script>
    <script src="product-search-manager.js"></script>
    <script src="search-functions.js"></script>
    <script src="column-visibility-manager.js"></script>
    <script src="tab1-orders.js"></script>

    <!-- Additional Script for Checkbox Handling -->
    <script>
        // Handle checkbox selection
        document.addEventListener('DOMContentLoaded', function () {
            const selectAllCheckbox = document.getElementById('selectAll');

            // Individual checkbox change
            document.addEventListener('change', function (e) {
                if (e.target.matches('tbody input[type="checkbox"]')) {
                    // Call global updateActionButtons from tab1-orders.js
                    if (typeof updateActionButtons === 'function') {
                        updateActionButtons();
                    }

                    // Update select all checkbox state
                    const checkboxes = document.querySelectorAll('tbody input[type="checkbox"]');
                    const allChecked = Array.from(checkboxes).every(cb => cb.checked);
                    const someChecked = Array.from(checkboxes).some(cb => cb.checked);

                    if (selectAllCheckbox) {
                        selectAllCheckbox.checked = allChecked;
                        selectAllCheckbox.indeterminate = someChecked && !allChecked;
                    }
                }
            });
        });
    </script>

    <!-- Save Indicator -->
    <div class="save-indicator" id="saveIndicator">
        <i class="fas fa-check-circle"></i>
        <span id="saveIndicatorText">ƒê√£ l∆∞u th√†nh c√¥ng</span>
    </div>

    <!-- Pancake Settings Modal -->
    <div class="tag-modal" id="pancakeSettingsModal" style="display: none;">
        <div class="tag-modal-content">
            <div class="tag-modal-header">
                <h3><i class="fas fa-cog"></i> C√†i ƒë·∫∑t Pancake JWT Token</h3>
                <button class="tag-modal-close" onclick="closePancakeSettingsModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="tag-modal-body">
                <!-- Token Info -->
                <div style="margin-bottom: 20px; padding: 12px; background: #f3f4f6; border-radius: 8px;">
                    <div style="font-size: 13px; color: #6b7280; margin-bottom: 8px;">
                        <strong>Tr·∫°ng th√°i token hi·ªán t·∫°i:</strong>
                    </div>
                    <div id="pancakeTokenInfo" style="font-size: 13px; color: #374151;">
                        ƒêang ki·ªÉm tra...
                    </div>
                </div>

                <!-- Token Input -->
                <div style="margin-bottom: 20px;">
                    <label
                        style="display: block; font-size: 14px; font-weight: 500; margin-bottom: 8px; color: #374151;">
                        JWT Token:
                    </label>
                    <textarea id="pancakeTokenInput"
                        placeholder="Nh·∫≠p JWT token t·ª´ cookie pancake.vn ho·∫∑c ƒë·ªÉ tr·ªëng ƒë·ªÉ t·ª± ƒë·ªông l·∫•y t·ª´ cookie..."
                        style="width: 100%; min-height: 120px; padding: 12px; border: 1px solid #d1d5db; border-radius: 8px; font-family: monospace; font-size: 12px; resize: vertical;"></textarea>
                    <div style="margin-top: 8px; font-size: 12px; color: #6b7280;">
                        üí° Token s·∫Ω ƒë∆∞·ª£c l∆∞u v√†o Firebase. N·∫øu ƒë·ªÉ tr·ªëng, h·ªá th·ªëng t·ª± ƒë·ªông l·∫•y t·ª´ cookie pancake.vn (c·∫ßn
                        ƒëƒÉng nh·∫≠p tr∆∞·ªõc).
                    </div>
                </div>

                <!-- Instructions -->
                <div
                    style="padding: 12px; background: #fef3c7; border-left: 4px solid #f59e0b; border-radius: 4px; margin-bottom: 20px;">
                    <div style="font-size: 13px; color: #92400e; font-weight: 500; margin-bottom: 8px;">
                        üìã C√°ch l·∫•y JWT token:
                    </div>
                    <ol style="margin: 0; padding-left: 20px; font-size: 12px; color: #92400e;">
                        <li>M·ªü tab m·ªõi: <a href="https://pancake.vn" target="_blank"
                                style="color: #d97706;">https://pancake.vn</a></li>
                        <li>ƒêƒÉng nh·∫≠p v√†o t√†i kho·∫£n Pancake</li>
                        <li>M·ªü DevTools (F12) ‚Üí Console tab</li>
                        <li>G√µ: <code
                                style="background: #fff; padding: 2px 6px; border-radius: 3px;">document.cookie.split(';').find(c => c.includes('jwt'))</code>
                        </li>
                        <li>Copy gi√° tr·ªã sau "jwt=" v√† paste v√†o √¥ tr√™n</li>
                    </ol>
                </div>

                <!-- Actions -->
                <div style="display: flex; gap: 8px;">
                    <button class="tag-btn-save" onclick="fetchTokenFromCookie()" style="flex: 1; background: #10b981;">
                        <i class="fas fa-sync"></i> L·∫•y t·ª´ Cookie
                    </button>
                    <button class="tag-btn-cancel" onclick="clearPancakeToken()" style="flex: 1; background: #ef4444;">
                        <i class="fas fa-trash"></i> X√≥a Token
                    </button>
                </div>
            </div>
            <div class="tag-modal-footer">
                <button class="tag-btn-cancel" onclick="closePancakeSettingsModal()">
                    ƒê√≥ng
                </button>
                <button class="tag-btn-save" onclick="savePancakeToken()">
                    <i class="fas fa-save"></i> L∆∞u
                </button>
            </div>
        </div>
    </div>

    <!-- Pancake Settings Script -->
    <script>
        // Open Pancake Settings Modal
        async function openPancakeSettingsModal() {
            document.getElementById('pancakeSettingsModal').style.display = 'flex';

            // Load current token info
            if (window.pancakeTokenManager) {
                await window.pancakeTokenManager.initialize();
                const tokenInfo = window.pancakeTokenManager.getTokenInfo();
                const infoDiv = document.getElementById('pancakeTokenInfo');

                if (tokenInfo) {
                    const statusColor = tokenInfo.isExpired ? '#ef4444' : '#10b981';
                    const statusText = tokenInfo.isExpired ? '‚ùå H·∫øt h·∫°n' : '‚úÖ C√≤n h·∫°n';
                    infoDiv.innerHTML = `
                            <div style="margin-bottom: 4px;">
                                <strong>T√™n:</strong> ${tokenInfo.name || 'N/A'}
                            </div>
                            <div style="margin-bottom: 4px;">
                                <strong>User ID:</strong> ${tokenInfo.uid || 'N/A'}
                            </div>
                            <div style="margin-bottom: 4px;">
                                <strong>H·∫øt h·∫°n:</strong> ${tokenInfo.expiryDate}
                            </div>
                            <div style="color: ${statusColor}; font-weight: 500;">
                                <strong>Tr·∫°ng th√°i:</strong> ${statusText}
                            </div>
                        `;
                } else {
                    infoDiv.innerHTML = '<div style="color: #6b7280;">‚ö†Ô∏è Ch∆∞a c√≥ token</div>';
                }
            }
        }

        // Close Pancake Settings Modal
        function closePancakeSettingsModal() {
            document.getElementById('pancakeSettingsModal').style.display = 'none';
            document.getElementById('pancakeTokenInput').value = '';
        }

        // Fetch Token From Cookie
        async function fetchTokenFromCookie() {
            try {
                if (!window.pancakeTokenManager) {
                    throw new Error('PancakeTokenManager not available');
                }

                const token = window.pancakeTokenManager.getTokenFromCookie();
                if (!token) {
                    throw new Error('Kh√¥ng t√¨m th·∫•y JWT token trong cookie. Vui l√≤ng ƒëƒÉng nh·∫≠p v√†o pancake.vn tr∆∞·ªõc.');
                }

                // Show in input
                document.getElementById('pancakeTokenInput').value = token;

                // Save to Firebase
                await window.pancakeTokenManager.saveTokenToFirebase(token);

                if (window.notificationManager) {
                    window.notificationManager.show('‚úÖ ƒê√£ l·∫•y token t·ª´ cookie v√† l∆∞u v√†o Firebase!', 'success');
                } else {
                    alert('‚úÖ ƒê√£ l·∫•y token t·ª´ cookie v√† l∆∞u v√†o Firebase!');
                }

                // Refresh token info
                await openPancakeSettingsModal();

            } catch (error) {
                console.error('[PANCAKE-SETTINGS] Error fetching token:', error);
                if (window.notificationManager) {
                    window.notificationManager.show('‚ùå L·ªói: ' + error.message, 'error');
                } else {
                    alert('‚ùå L·ªói: ' + error.message);
                }
            }
        }

        // Save Pancake Token
        async function savePancakeToken() {
            try {
                const tokenInput = document.getElementById('pancakeTokenInput').value.trim();

                if (!tokenInput) {
                    throw new Error('Vui l√≤ng nh·∫≠p JWT token ho·∫∑c b·∫•m "L·∫•y t·ª´ Cookie"');
                }

                if (!window.pancakeTokenManager) {
                    throw new Error('PancakeTokenManager not available');
                }

                await window.pancakeTokenManager.setTokenManual(tokenInput);

                if (window.notificationManager) {
                    window.notificationManager.show('‚úÖ ƒê√£ l∆∞u token v√†o Firebase!', 'success');
                } else {
                    alert('‚úÖ ƒê√£ l∆∞u token v√†o Firebase!');
                }

                closePancakeSettingsModal();

                // Re-initialize PancakeDataManager
                if (window.pancakeDataManager) {
                    await window.pancakeDataManager.initialize();
                }

            } catch (error) {
                console.error('[PANCAKE-SETTINGS] Error saving token:', error);
                if (window.notificationManager) {
                    window.notificationManager.show('‚ùå L·ªói: ' + error.message, 'error');
                } else {
                    alert('‚ùå L·ªói: ' + error.message);
                }
            }
        }

        // Clear Pancake Token
        async function clearPancakeToken() {
            if (!confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a token?')) {
                return;
            }

            try {
                if (!window.pancakeTokenManager) {
                    throw new Error('PancakeTokenManager not available');
                }

                await window.pancakeTokenManager.clearToken();

                if (window.notificationManager) {
                    window.notificationManager.show('‚úÖ ƒê√£ x√≥a token!', 'success');
                } else {
                    alert('‚úÖ ƒê√£ x√≥a token!');
                }

                closePancakeSettingsModal();

            } catch (error) {
                console.error('[PANCAKE-SETTINGS] Error clearing token:', error);
                if (window.notificationManager) {
                    window.notificationManager.show('‚ùå L·ªói: ' + error.message, 'error');
                } else {
                    alert('‚ùå L·ªói: ' + error.message);
                }
            }
        }

        // ====== CHAT API SOURCE TOGGLE ======
        /**
         * Toggle gi·ªØa Pancake API v√† ChatOmni API
         */
        function toggleChatAPISource() {
            if (!window.chatAPISettings) {
                console.error('[CHAT-API-TOGGLE] chatAPISettings not available');
                alert('‚ùå L·ªói: chatAPISettings kh√¥ng kh·∫£ d·ª•ng');
                return;
            }

            // Toggle source
            const newSource = window.chatAPISettings.toggle();
            const displayName = window.chatAPISettings.getDisplayName(newSource);

            console.log(`[CHAT-API-TOGGLE] Switched to: ${displayName}`);

            // Update UI label
            updateChatAPISourceLabel();

            // Show notification
            if (window.notificationManager) {
                window.notificationManager.show(`‚úÖ ƒê√£ chuy·ªÉn sang ${displayName}`, 'success');
            } else {
                alert(`‚úÖ ƒê√£ chuy·ªÉn sang ${displayName}`);
            }

            // Reload table ƒë·ªÉ hi·ªÉn th·ªã d·ªØ li·ªáu m·ªõi
            if (typeof performSearch === 'function') {
                console.log('[CHAT-API-TOGGLE] Reloading table...');
                performSearch();
            } else {
                console.warn('[CHAT-API-TOGGLE] performSearch function not found, please reload manually');
            }
        }

        /**
         * Update UI label cho button
         */
        function updateChatAPISourceLabel() {
            const label = document.getElementById('chatApiSourceLabel');
            if (!label || !window.chatAPISettings) return;

            const displayName = window.chatAPISettings.getDisplayName();
            label.textContent = displayName;
        }

        // Update label khi page load
        document.addEventListener('DOMContentLoaded', function () {
            updateChatAPISourceLabel();

            // Listen for API source changes from other sources
            window.addEventListener('chatApiSourceChanged', function (e) {
                console.log('[CHAT-API-TOGGLE] API source changed:', e.detail.source);
                updateChatAPISourceLabel();
            });
        });
        // ====================================
    </script>
</body>

</html>